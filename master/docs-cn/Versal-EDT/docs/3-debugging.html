


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Boot and Configuration" href="4-boot-and-config.html" />
    <link rel="prev" title="Versal ACAP CIPS and NoC (DDR) IP Core Configuration" href="2-cips-noc-ip-config.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> 嵌入式设计教程
          

          
          </a>

          
            
            
              <div class="version">
                2020.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
             <p class="caption"><span class="caption-text">Versal 嵌入式设计教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="1-getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="2-cips-noc-ip-config.html">Versal ACAP CIPS 和 NoC (DDR) IP 核配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="3-debugging.html">使用 Vitis 软件平台进行调试</a></li>
<li class="toctree-l1"><a class="reference internal" href="4-boot-and-config.html">启动和配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="5-system-design-example.html">使用标量引擎和自适应引擎的系统设计示例</a></li>
<li class="toctree-l1"><a class="reference internal" href="6-system-design-example-HSDP.html">面向含 SmartLynq+ 模块的高速调试端口的系统设计示例</a></li>
<li class="toctree-l1"><a class="reference internal" href="A-creating-plm.html">附录：创建 PLM</a></li>
</ul>     
            
              
            
            
              <p class="caption"><span class="caption-text">版本</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Xilinx/Embedded-Design-Tutorials/tree/master">主干</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">本页</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="_sources/3-debugging.md.txt"
						rel="nofollow">显示源代码</a></li>						
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">嵌入式设计教程</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>使用 Vitis 软件平台进行调试</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/3-debugging.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vitis">
<h1>使用 Vitis 软件平台进行调试<a class="headerlink" href="#vitis" title="Permalink to this headline">¶</a></h1>
<p>本章描述了对您所执行的设计流程可能出现的各种问题进行调试的方法。第一个选项是使用赛灵思 Vitis™ 软件平台进行调试。</p>
<p>Vitis 软件平台调试器提供了下列调试功能：</p>
<ul class="simple">
<li><p>支持在 Arm® Cortex™-A72、Arm Cortex-R5F 和 MicroBlaze™ 处理器架构（异构多处理器硬件系统调试）上调试程序。</p></li>
<li><p>支持在硬件开发板上调试程序。</p></li>
<li><p>支持在远程硬件系统上进行调试。</p></li>
<li><p>提供功能丰富的 IDE 用于调试程序。</p></li>
<li><p>提供工具命令语言 (Tcl) 界面，用于运行测试脚本和自动化操作。</p></li>
</ul>
<p>Vitis 软件平台调试器支持您在程序执行时查看其中进行的操作。您可设置断点或观察点以停止处理器、单步调试程序执行、查看程序变量和堆栈以及查看系统中存储器的内容。</p>
<p>Vitis 软件平台支持通过赛灵思系统调试器进行调试。</p>
<div class="section" id="id1">
<h2>赛灵思系统调试器<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>赛灵思 Vitis™ 软件平台调试器支持您对代码逐行进行单步调试。您可设置断点或观察点以停止处理器、单步调试程序执行、查看程序变量和堆栈以及查看系统中存储器的内容。</p>
<p>调试器支持通过单应用调试和 GNU 调试器 (GDB) 来进行调试。赛灵思自定义系统调试器衍生自开源工具并与 Vitis 软件平台集成。</p>
<p>赛灵思系统调试器使用赛灵思 hw_server 作为底层调试引擎。Vitis 软件平台可将每项用户界面操作转换为一连串目标通信框架 (TCF) 命令。随后，它会对系统调试器的输出进行处理，以显示所调试的程序的当前状态。它可使用赛灵思 hw_server 与硬件上的处理器进行通信。调试工作流程如下图所示。</p>
<p>图 1：<strong>系统调试器流程</strong></p>
<p><img alt="_images/quz1567060977342_LowRes.png" src="../../_images/quz1567060977342_LowRes.png" /></p>
<p>调试工作流程由以下几个部分组成。</p>
<ul class="simple">
<li><p><strong>可执行 ELF 文件</strong>：要调试应用，您必须使用专为调试而编译的 elf 文件。调试用 elf 文件包含额外调试信息，以供调试器在源代码与该源代码所生成的二进制文件之间建立直接关联。要管理构建配置，请右键单击软件应用并选择“<strong>构建配置 (Build Configurations) → 管理 (Manage)</strong>”。</p></li>
<li><p><strong>调试配置</strong>：要启动调试会话，您必须在 Vitis 软件平台中创建调试配置。此配置可捕获启动调试会话所需的选项，包括可执行文件名称、要调试的处理器目标及其它信息。要创建调试配置，请右键单击软件应用并选择“<strong>调试方式 (Debug As) → 调试配置 (Debug Configurations)</strong>”。</p></li>
<li><p><strong>Vitis 软件平台调试透视图</strong>：通过使用“调试 (Debug)”透视图，您就可以在 Workbench 中管理程序的调试或运行。您可对程序的执行进行如下控制：包括设置断点、暂挂已启动的程序、单步调用代码并检验变量内容等。要查看“<strong>Debug</strong>”透视图，请依次选择“<strong>窗口 (Window) → 打开透视图 (Open Perspective) → 调试 (Debug)</strong>”。</p></li>
</ul>
<p>在 Vitis 软件平台中，修改代码、构建可执行文件和调试程序的整个流程是可重复的。</p>
<blockquote>
<div><p><strong>注意</strong>：如果您在编译后对源代码进行编辑，则会更改行号，因为调试信息与源代码之间直接相连。同样，对已最优化的二进制文件进行调试还可能导致执行追踪过程中出现意外的跳步。</p>
</div></blockquote>
</div>
<div class="section" id="id2">
<h2>使用 Vitis 软件平台调试软件<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>此示例描述了如何调试 hello world 应用。</p>
<p>如果您尚未在 APU 或 RPU 上创建 hello world 应用，请遵循<a class="reference external" href="./2-cips-noc-ip-config.md#%E8%BF%90%E8%A1%8C%E8%A3%B8%E6%9C%BA-hello-world-%E5%BA%94%E7%94%A8">运行裸机 Hello World 应用</a>或<a class="reference external" href="./2-cips-noc-ip-config.md#%E5%9C%A8-ddr-%E5%86%85%E5%AD%98%E4%B8%8A%E8%BF%90%E8%A1%8C%E8%A3%B8%E6%9C%BA-hello-world-%E5%BA%94%E7%94%A8">在 DDR 内存上运行裸机 Hello World 应用</a>中的步骤创建此应用。</p>
<p>创建 Hello World 应用后，请逐步执行以下示例，使用 Vitis™ 软件平台来调试软件。</p>
<ol>
<li><p>右键单击应用，然后单击“<strong>构建工程 (Build Project)</strong>”以构建应用。</p></li>
<li><p>右键单击应用工程并选择“<strong>调试方式 (Debug As) → 在硬件上启动（单应用调试）(Launch on Hardware (Single Application Debug))</strong>”，如下图所示。</p>
<p><img alt="_images/image40.jpeg" src="../../_images/image40.jpeg" /></p>
<blockquote>
<div><p><strong>注意</strong>：“Debug”透视图也可通过选择“<strong>窗口 (Window) → 调试透视图 (Debug Perspective)</strong>”来启动。</p>
</div></blockquote>
<p><img alt="_images/image41.jpeg" src="../../_images/image41.jpeg" /></p>
<p><strong>注意</strong>：此页面中所示地址可能与您的系统上所示地址略有不同。</p>
<p>处理器当前置于 main() 方法开头，且程序执行暂挂于行 0x00000000fffc0cf0。您可在“反汇编 (Disassembly)”视图中确认此信息，在此视图中显示汇编级程序执行同样暂挂于 0x00000000fffc0cf0。</p>
<p><strong>注意</strong>：如果“<strong>Disassembly</strong>”视图未显示，请选择“<strong>窗口 (Window) → 反汇编 (Disassembly)</strong>”。</p>
</li>
<li><p>helloworld.c 窗口同样显示执行暂挂于 C 语言代码中的首个可执行文件行上。选择“<strong>寄存器 (Registers)</strong>”视图可确认程序计数器 pc 寄存器包含 0x00000000fffc0cf0。</p>
<blockquote>
<div><p><strong>注意</strong>：如果“Registers”视图未显示，请选择“<strong>窗口 (Window) → 寄存器 (Registers)</strong>”。</p>
</div></blockquote>
</li>
<li><p>双击 helloworld.c 窗口中显示 printf(“Hello World from APU\n\r”); 的代码行边缘（行号左侧）处。这样即可在 printf 命令处设置断点。要确认断点，请复查“断点 (Breakpoints)”视图。</p>
<blockquote>
<div><p><strong>注意</strong>：如果“Breakpoints”视图未显示，请选择“<strong>窗口 (Window) → 断点 (Breakpoints)</strong>”。</p>
</div></blockquote>
</li>
<li><p>选择“<strong>运行 (Run) → 单步进入 (Step Into)</strong>”以便对 init_platform() 例程执行单步进入。程序执行暂挂于 0x00000000fffc0cf0 位置。调用堆栈当前深度为 2 层。</p></li>
<li><p>选择“<strong>运行 (Run) → 恢复 (Resume)</strong>”以便继续运行程序直至断点。</p>
<p>这样程序执行会止于包含 printf 命令的代码行。“<strong>Disassembly</strong>”和“<strong>Debug</strong>”窗口均显示程序执行止于 0x00000000fffc0cf4。</p>
<blockquote>
<div><p><strong>注意</strong>：如果您对 helloworld 源代码执行了任何修改，那么您的调试窗口中的执行地址可能与此处所示不同。</p>
</div></blockquote>
</li>
<li><p>请选择“<strong>Run → Resume</strong>”以便运行程序直至结束。</p>
<p>当程序完成后，“<strong>Debug</strong>”窗口显示程序暂挂于“<strong>exit</strong>”例程中。如果您在调试器控制下运行程序，就会出现此结果。</p>
</li>
<li><p>请反复多次运行您的代码。尝试单步步进、检验存储器、断点、修改代码并添加 print 语句。尝试添加和移动视图。</p>
<blockquote>
<div><p><strong>提示</strong>：您可使用 Vitis 软件平台调试快捷键来执行单步进入 (step-into) (F5)、单步返回 (step-return) (F7)、单步跳过 (step-over) (F6) 和恢复 (resume) (F8)。或者，您可使用工具栏按钮。</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="xsct">
<h2>使用 XSCT 执行调试<a class="headerlink" href="#xsct" title="Permalink to this headline">¶</a></h2>
<p>您可在命令行模式下使用封装在 XSCT 内的 XSDB 来执行调试。此示例描述了如何使用 XSCT 来对裸机应用 hello_world_r5 执行调试。</p>
<p>以下步骤指示如何在 Arm Cortex-R5F 上使用 XSCT 加载裸机应用。</p>
<p>此示例仅用于演示使用 XSDB/XSCT 进行命令行调试时可能出现的情况。根据要求，您可在 XSCT 中选择使用系统调试器图形界面或使用命令行调试器来调试代码。所有 XSCT 命令均可脚本化，对于本示例中涵盖的命令都是如此。</p>
<div class="section" id="id3">
<h3>设置目标<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>在目标上的 USB-JTAG 连接器与主机上的 USB 端口之间使用 USB 线进行连接。</p></li>
<li><p>在“JTAG 启动 (JTAG Boot)”模式下设置开发板，其中 SW1 设置如下图所示。</p>
<p><img alt="_images/image43.jpeg" src="../../_images/image43.jpeg" /></p>
</li>
<li><p>使用电源开关 SW13 给开发板上电。</p></li>
<li><p>单击 Vitis 软件平台工具栏中的“<strong>XSCT 控制台 (XSCT Console)</strong>”按钮，以打开“XSCT Console”视图。或者，也可依次单击“<strong>Xilinx → XSCT Console</strong>”以打开“XSCT Console”视图。</p>
<p><img alt="_images/image44.jpeg" src="../../_images/image44.jpeg" /></p>
</li>
<li><p>在“<strong>XSCT Console</strong>”视图中，使用 connect 命令通过 JTAG 连接至目标：</p>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">connect</span></code></p>
<p>connect 命令会返回连接的通道 ID。</p>
</li>
<li><p>加载 pdi/bin 文件：</p>
<p><code class="docutils literal notranslate"><span class="pre">device</span> <span class="pre">program</span> <span class="pre">&lt;path</span> <span class="pre">to</span> <span class="pre">.pdi</span> <span class="pre">file&gt;</span></code></p>
<blockquote>
<div><p><strong>注意</strong>：在 <code class="docutils literal notranslate"><span class="pre">C:\edt\edt_versal\edt_versal.runs\impl_1\edt_versal_wrapper.pdi</span></code> 中可找到此 PDI 文件。在 Windows 下，路径名应以括号（如，{<code class="docutils literal notranslate"><span class="pre">C:\path\to\file.pdi</span></code>}）括起，以避免反斜杠被视为转义字符。对于 Linux 则无此要求，因为 Linux 使用正斜杠。</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="id4">
<h3>使用 XSCT 加载应用<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>以下是使用 XSCT 加载应用的步骤。</p>
<ol>
<li><p>运行 <code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">targets</span></code>。</p>
<p>targets 命令可列出可用目标，并允许您通过目标 ID 来选择相应目标。在 JTAG 链上发现目标时，会为其分配 ID，因此目标 ID 可能随会话不同而变。</p>
<blockquote>
<div><p><strong>注意</strong>：对于非交互式使用（例如，脚本编制），可使用 -filter 选项来选择目标，以代替按 ID 选择目标。</p>
</div></blockquote>
<p>下图中列出了目标。</p>
<p><img alt="_images/image45.png" src="../../_images/image45.png" /></p>
</li>
<li><p>现在，请在 Arm® Cortex-R5F 核 0 上下载 hello_world_r5 应用。</p></li>
<li><p>选择 RPU Cortex™-R5F 核 0 目标 ID。</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">xsct</span><span class="o">%</span> targets <span class="mi">3</span>
<span class="nv">xsct</span><span class="o">%</span> rst <span class="o">-</span>processor
</pre></div>
</div>
<p>rst -processor 命令用于清除个别处理器核上的复位。此步骤的重要性在于当 Versal™ ACAP 启动 JTAG 启动模式时，所有 Cortex- A72 核与 Cortex-R5F 核都保持处于复位状态。您必须清除每个核上的复位，然后才能在这些核上执行调试。XSDB 中的 rst 命令可用于清除复位。</p>
<blockquote>
<div><p><strong>注意</strong>：对于包含当前目标作为子项的组（例如，APU 或 RPU），运行 rst -cores 命令即可清除组中的所有处理器核上的复位。例如，如果当前目标为 Cortex-A72 #0，那么 rst -cores 可清除 APU 中的所有 Cortex-A72 核上的复位。</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">dow</span> <span class="pre">{C:\edt\edt_vck190\helloworld_r5\Debug\helloworld_r5.elf}</span></code></p>
<p>或</p>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">dow</span> <span class="pre">C:/edt/edt_vck190/helloworld_r5/Debug/helloworld_r5.elf</span></code></p>
<p>此时，您可看到来自 elf 文件的各段均按顺序下载。下载成功后会显示 XSCT 提示。现在，请配置串口终端（Tera Term、Minicom 或用于 UART-0 USB 串口连接的 Vitis 软件平台串口终端接口）。</p>
</li>
</ol>
</div>
<div class="section" id="id5">
<h3>串口终端配置<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>根据所用主机使用 Tera Term 或 Minicom 启动终端会话，COM 端口和波特率如下图所示。</p>
<p><img alt="_images/image46.png" src="../../_images/image46.png" /></p>
</li>
<li><p>对于端口设置，请验证器件管理器中的 COM 端口。VCK190 评估板提供了 3 个公开的 USB UART 接口。请选择与编号最低的接口关联的 COM 端口。在此例中，对于 UART-0，请选择含 interface-0 的 com-port。</p></li>
</ol>
</div>
<div class="section" id="id6">
<h3>使用 XSCT 运行和调试应用<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>运行应用前，请在 <code class="docutils literal notranslate"><span class="pre">main()</span></code> 处设置断点。</p>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">bpadd</span> <span class="pre">-addr</span> <span class="pre">&amp;main</span></code></p>
<p>此命令会返回断点 ID。您可使用 bplist 命令验证设置的断点。如需获取有关 XSCT 中的断点的详细信息，请在 XSCT 中输入 <code class="docutils literal notranslate"><span class="pre">help</span> <span class="pre">breakpoint</span></code>。</p>
</li>
<li><p>恢复处理器核。</p>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">con</span></code></p>
<p>当核命中断点时，会显示以下消息。</p>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">Info:</span> <span class="pre">Cortex-R5</span> <span class="pre">\#0</span> <span class="pre">Stopped</span> <span class="pre">at</span> <span class="pre">0x10021C</span> <span class="pre">(Breakpoint)</span></code></p>
</li>
<li><p>此时，当核停止后，您即可查看寄存器。</p>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">rrd</span></code></p>
</li>
<li><p>查看局部变量。</p>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">locals</span></code></p>
</li>
<li><p>单步跳过源代码中的一行，并查看堆栈追踪。</p>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span>xsct% nxt
Info: Cortex-R5 #0 Stopped at 0x100490 (Step)
xsct% bt
</pre></div>
</div>
<p>您可使用 <code class="docutils literal notranslate"><span class="pre">help</span></code> 命令来查找其它选项。</p>
<p><img alt="_images/image47.png" src="../../_images/image47.png" />}</p>
<p>您可使用 <code class="docutils literal notranslate"><span class="pre">help</span> <span class="pre">running</span></code> 命令获取可用于利用 XSCT 运行或调试应用的选项列表。</p>
<p><img alt="_images/image48.png" src="../../_images/image48.png" /></p>
</li>
<li><p>现在，您可运行代码。</p>
<p><code class="docutils literal notranslate"><span class="pre">xsct%</span> <span class="pre">con</span></code></p>
<p>这样即可在 UART-0 终端上查看 Cortex-R5F 应用打印消息。</p>
</li>
</ol>
<p>© 2020 年赛灵思公司版权所有。</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>
	  
	  
	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on January 29, 2021.
      </span>

    </p>
  </div>	  
      </div>
    </section>


  




  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>     	    
	    
	    
  
  
    
  
  

  
  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2020, Xilinx
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}
			
			underscoreSetup();
		</script>
	</body>
</html>