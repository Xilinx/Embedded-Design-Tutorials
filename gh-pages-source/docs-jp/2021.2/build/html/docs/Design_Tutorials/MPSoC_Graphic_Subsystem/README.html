


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Vitis Embedded Software Debugging Guide (UG1515) 2021.1" href="../../Vitis-Embedded-Software-Debugging/Debugging.html" />
    <link rel="prev" title="Software Profiling Using the Vitis Software Platform" href="../../Feature_Tutorials/sw-profiling/sw-profiling.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Embedded Design Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2021.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">简体中文</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-cn/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">日本語</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Versal-EDT/Versal-EDT.html">Versal ACAP Embedded Design Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/ZynqMPSoC-EDT/ZynqMPSoC-EDT.html">Zynq UltraScale+ MPSoC Embedded Design Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Introduction/Zynq7000-EDT/Zynq7000-EDT.html">Zynq-7000 Embedded Design Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Feature Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Feature_Tutorials/debuggable-fsbl/debuggable-fsbl.html">First Stage Boot Loader (FSBL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Feature_Tutorials/sw-profiling/sw-profiling.html">Profiling Applications with System Debugger</a></li>
</ul>
<p class="caption"><span class="caption-text">Design Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Example Setup for a Graphics and DisplayPort Based Sub-System</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuring-the-hardware">Configuring the Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-hardware-in-vivado-ip-integrator">Configuring Hardware in Vivado IP Integrator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-the-configuration-and-building-linux-images-using-petalinux">Modifying the Configuration and Building Linux Images Using PetaLinux</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-mali-opengles-application">Building the Mali OpenGLES Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#enable-gpu-libraries-and-other-packages-in-rootfs">Enable GPU Libraries and Other Packages in RootFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-linux-and-running-the-opengles-application-on-the-target-and-viewing-the-result-on-the-displayport">Loading Linux and Running the OpenGLES Application on the Target and Viewing the Result on the DisplayPort</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparing-the-sd-card">Preparing the SD Card</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-application-on-a-linux-target">Running the Application on a Linux Target</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-target">Setting Up the Target</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#powering-on-the-target-and-running-the-applications">Powering On the Target and Running the Applications</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Debugging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vitis-Embedded-Software-Debugging/Debugging.html">Vitis Embedded Software Debugging Guide (UG1515) 2021.1</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../User_Guides/SPA-UG/SPA-UG.html">System Performance Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../User_Guides/Performance_Benchmark/Dhrystone/README.html">Versal Dhrystone Benchmark</a></li>
</ul>
<p class="caption"><span class="caption-text">Previous Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://xilinx.github.io/Embedded-Design-Tutorials/docs/2021.1/docs/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="http://xilinx.github.io/Embedded-Design-Tutorials/docs/2020.2/docs/index.html">2020.2</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../_sources/docs/Design_Tutorials/MPSoC_Graphic_Subsystem/README.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Embedded Design Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Design Example: Example Setup for a Graphics and DisplayPort Based Sub-System</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/docs/Design_Tutorials/MPSoC_Graphic_Subsystem/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="design-example-example-setup-for-a-graphics-and-displayport-based-sub-system">
<h1>Design Example: Example Setup for a Graphics and DisplayPort Based Sub-System<a class="headerlink" href="#design-example-example-setup-for-a-graphics-and-displayport-based-sub-system" title="Permalink to this headline">¶</a></h1>
<p>This design example is primarily based on the graphics processing unit
and the DisplayPort on a Zynq® UltraScale+™ MPSoC device. The main idea
behind this example is to demonstrate the configurations, packages,
and tool flow required for running designs based on GPU and DP on a
Zynq UltraScale+ MPSoC device. This design example can be broken down
into the following steps:</p>
<ol class="simple">
<li><p>Configuring the hardware.</p></li>
<li><p>Configuring PetaLinux RootFS to include the required packages:</p>
<ol class="simple">
<li><p>GPU-related packages</p></li>
<li><p>X Window System and dependencies</p></li>
</ol>
</li>
<li><p>Building boot and Linux images using PetaLinux.</p></li>
<li><p>Building a graphics OpenGL ES application targeted for Mali GPU. This application is based on the X Window System.</p></li>
<li><p>Loading Linux on the ZCU102 board and running the graphics application on the target to see the result on the DisplayPort.</p></li>
</ol>
<div class="section" id="configuring-the-hardware">
<h2>Configuring the Hardware<a class="headerlink" href="#configuring-the-hardware" title="Permalink to this headline">¶</a></h2>
<p>In this section, you will configure the processing system to set dual
lower GT lanes for the DisplayPort. The hardware configuration in this
section is based on the same Vivado project that you created in
<a class="reference external" href="#design-example-1-using-gpios-timers-and-interrupts">Design Example 1: Using GPIOs, Timers, and Interrupts</a>.</p>
<div class="section" id="configuring-hardware-in-vivado-ip-integrator">
<h3>Configuring Hardware in Vivado IP Integrator<a class="headerlink" href="#configuring-hardware-in-vivado-ip-integrator" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Ensure that the edt_zcu102 project and the block design are open in Vivado.</p></li>
<li><p>Double-click the Zynq UltraScale+ processing system block in the Block Diagram window and wait till the Re-customize IP page opens.</p></li>
<li><p>In the Re-customize IP window, click <strong>I/O Configuration → High Speed</strong>.</p></li>
<li><p>Deselect PCIe peripheral connection.</p></li>
<li><p>Expand DisplayPort and set Lane Selection to <strong>Dual Lower</strong>, as shown in following figure:</p>
<p><img alt="../../../_images/image115.png" src="../../../_images/image115.png" /></p>
<blockquote>
<div><p><strong>Note:</strong> The DisplayPort lane selection is set to Dual Lane to
support UHD&#64;30 resolution in the design example of this tutorial.
This configuration locks the display for UHD&#64;30 as well as lower
resolutions such as 1080p60 for corresponding monitors.</p>
</div></blockquote>
</li>
<li><p>Click <strong>OK</strong> to close the Re-customize IP wizard.</p>
<blockquote>
<div><p><strong>CAUTION!</strong> Do not click the <strong>Run Block Automation</strong> link. Clicking
the link resets the design as per board preset and disables the
design updates you made using in this section.*</p>
</div></blockquote>
</li>
<li><p>Click <strong>File → Save Block Design</strong> to save the block design. Alternatively, press <strong>Ctrl+S</strong> to save the block design.</p></li>
<li><p>Click <strong>Generate Bitstream</strong>, re-synthesize the design and generate the bitstream.</p></li>
<li><p>After the bitstream is generated successfully, export the hardware platform using the Vivado export hardware platform wizard as shown in <a class="reference external" href="#exporting-hardware-platform">Exporting Hardware Platform</a>.</p></li>
<li><p>Copy the XSA file to a Linux host machine.</p></li>
</ol>
<p>The next section describes how to build Linux for your hardware
configuration and also add additional software packages for GPU and
the X Window System.</p>
</div>
</div>
<div class="section" id="modifying-the-configuration-and-building-linux-images-using-petalinux">
<h2>Modifying the Configuration and Building Linux Images Using PetaLinux<a class="headerlink" href="#modifying-the-configuration-and-building-linux-images-using-petalinux" title="Permalink to this headline">¶</a></h2>
<p>Reconfigure the PetaLinux BSP in sync with the new hardware changes.
This section uses the PetaLinux project you created in Example
Project: Create Linux Images using PetaLinux.</p>
<ol>
<li><p>Change to the PetaLinux directory using the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">cd</span> <span class="pre">xilinx-zcu102-2020.1</span></code></p>
</li>
<li><p>Copy the hardware platform <code class="docutils literal notranslate"><span class="pre">edt_zcu102_wrapper.xsa</span></code> in the Linux host machine.</p></li>
<li><p>Reconfigure the BSP using the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">petalinux-config</span> <span class="pre">--get-hw-description=&lt;path</span> <span class="pre">containingedt_zcu102_wrapper.xsa&gt;/</span></code></p>
<p>The PetaLinux configuration wizard opens.</p>
</li>
<li><p>Save and exit the wizard without any additional configuration settings. Wait until PetaLinux reconfigures the project.</p></li>
<li><p>Clean the existing bootloader image. This is to ensure that the bootloader is recreated in sync with new hardware design.</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">petalinux-build</span> <span class="pre">-c</span> <span class="pre">bootloader</span> <span class="pre">-x</span> <span class="pre">distclean</span></code></p>
</li>
</ol>
</div>
<div class="section" id="building-the-mali-opengles-application">
<h2>Building the Mali OpenGLES Application<a class="headerlink" href="#building-the-mali-opengles-application" title="Permalink to this headline">¶</a></h2>
<p>This section leads you through building a triangle-based cube
application. This application is written in OpenGLES and is based on
the X Window System. For more details and for the application source
code, refer to <code class="docutils literal notranslate"><span class="pre">tricube</span></code> in the <code class="docutils literal notranslate"><span class="pre">design_files</span></code> folder of the zip file that
accompanies this tutorial. See <a class="reference external" href="2-getting-started.md#design-files-for-this-tutorial">Design Files for This Tutorial</a>.</p>
<p>Use the following steps to build the OpenGLES application:</p>
<ol>
<li><p>Copy the entire <code class="docutils literal notranslate"><span class="pre">tricube</span></code> application source directory to the Linux host machine in the <code class="docutils literal notranslate"><span class="pre">recipe-apps</span></code> directory of the PetaLinux project.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;PetaLinux-Project&gt;/project-spec/meta-user/recipes-apps/tricube</span></code></p>
</li>
<li><p>Add the newly created <code class="docutils literal notranslate"><span class="pre">tricube</span></code> to <code class="docutils literal notranslate"><span class="pre">user-rootfsconfig</span></code>, which is located in <code class="docutils literal notranslate"><span class="pre">&lt;plnx_project&gt;/project-spec/meta-user/conf/user-rootfsconfig</span></code>.</p>
<p>With this addition, the file will appear as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CONFIG_gpio</span><span class="o">-</span><span class="n">demo</span>
<span class="n">CONFIG_peekpoke</span>
<span class="n">CONFIG_tricube</span>
</pre></div>
</div>
</li>
<li><p>Refer to recipe <code class="docutils literal notranslate"><span class="pre">tricube/tricube.bb</span></code> for detailed instructions and
libraries used for building this application. The X Window System
(X11) packages included while building the above application are
application dependent. Libraries included in <code class="docutils literal notranslate"><span class="pre">tricube.bb</span></code> recipe are
based on the packages that were used in the application.</p></li>
</ol>
</div>
<div class="section" id="enable-gpu-libraries-and-other-packages-in-rootfs">
<h2>Enable GPU Libraries and Other Packages in RootFS<a class="headerlink" href="#enable-gpu-libraries-and-other-packages-in-rootfs" title="Permalink to this headline">¶</a></h2>
<p>In this section, you will use the PetaLinux RootFS configuration
wizard to add the Mali GPU libraries. PetaLinux is shipped with Mali
GPU libraries and device drivers for the Mali GPU. By default, the Mali
driver is enabled in the kernel tree, but Mali user libraries need to
be configured (on an as-needed basis) in the root file system. In
addition to this, you will use the same wizard to include the X Window
System libraries.</p>
<ol>
<li><p>Open the PetaLinux RootFS Configuration wizard:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">petalinux-config</span> <span class="pre">-c</span> <span class="pre">rootfs</span></code></p>
</li>
<li><p>Navigate to and enable the following packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Filesystem</span> <span class="n">Packages</span> <span class="o">---&gt;</span> <span class="n">libs</span> <span class="o">---&gt;</span> <span class="n">libmali</span><span class="o">-</span><span class="n">xlnx</span> <span class="o">---&gt;</span> <span class="n">libmali</span><span class="o">-</span><span class="n">xlnx</span>
<span class="n">Filesystem</span> <span class="n">Packages</span> <span class="o">---&gt;</span> <span class="n">libs</span> <span class="o">---&gt;</span> <span class="n">libmali</span><span class="o">-</span><span class="n">xlnx</span> <span class="o">---&gt;</span> <span class="n">libmali</span><span class="o">-</span><span class="n">xlnx</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>These packages enable you to build and run OpenGLES applications
targeted for Mali GPU in the Zynq UltraScale+ MPSoC device.</p>
</li>
<li><p>Add the X11 package groups to add X Window related packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Petalinux</span> <span class="n">Package</span> <span class="n">Groups</span> <span class="o">&gt;</span> <span class="n">packagegroup</span><span class="o">-</span><span class="n">petalinux</span><span class="o">-</span><span class="n">x11</span> <span class="o">&gt;</span><span class="n">packagegrouppetalinux</span><span class="o">-</span>
<span class="n">x11</span>
<span class="n">Petalinux</span> <span class="n">Package</span> <span class="n">Groups</span> <span class="o">&gt;</span> <span class="n">packagegroup</span><span class="o">-</span><span class="n">petalinux</span><span class="o">-</span><span class="n">x11</span> <span class="o">&gt;</span>
<span class="n">packagegroup</span><span class="o">-</span><span class="n">petalinux</span><span class="o">-</span><span class="n">x11</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</li>
<li><p>Add the OpenGLES application created in the earlier section:</p>
<p><code class="docutils literal notranslate"><span class="pre">User</span> <span class="pre">Packages</span> <span class="pre">\-\--\</span> <span class="pre">\[\*\]tricube</span></code></p>
</li>
<li><p>After enabling all the packages, save the config file and exit the RootFS configuration settings.</p></li>
<li><p>Build the Linux images using the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">petalinux-build</span></code></p>
<blockquote>
<div><p><strong>Note:</strong> If the PetaLinux build fails, use the following commands
to build again:</p>
</div></blockquote>
</li>
<li><p>Verify that the <code class="docutils literal notranslate"><span class="pre">image.ub</span></code> Linux image file is generated in the <code class="docutils literal notranslate"><span class="pre">images/linux</span></code> directory.</p></li>
<li><p>Generate the boot image for this design example as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ petalinux-package --boot --fsbl images/linux/zynqmp_fsbl.elf --pmufw images/linux/pmufw.elf --atf images/linux/bl31.elf --fpga images/linux/system.bit
--u-boot images/linux/u-boot.elf
</pre></div>
</div>
</li>
</ol>
<p>A <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code> Boot image is created. It is composed of the FSBL boot
loader, the PL bitstream, PMU firmware, ATF, and U-Boot.</p>
<blockquote>
<div><p><strong>IMPORTANT!:</strong> This example uses GPU packages based on the X Window
System, which is the default setting in PetaLinux 2019.2. To enable
Frame Buffer fbdev based GPU packages in PetaLinux 2019.2, add the
following line in <code class="docutils literal notranslate"><span class="pre">/project-spec/meta-user/conf/petalinuxbsp.conf</span></code>:</p>
<p><em>DISTRO_FEATURES_remove_zynqmp = “ x11”</em></p>
<p>See the example eglfbdev application (based on fdev) available in the <a class="reference external" href="2-getting-started.md#design-files-for-this-tutorial">Design Files for This Tutorial</a>. For more information, see Xilinx Answer Record <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/ndoc?t=answers%3Bd%3D68821.html">68821</a>.</p>
</div></blockquote>
</div>
<div class="section" id="loading-linux-and-running-the-opengles-application-on-the-target-and-viewing-the-result-on-the-displayport">
<h2>Loading Linux and Running the OpenGLES Application on the Target and Viewing the Result on the DisplayPort<a class="headerlink" href="#loading-linux-and-running-the-opengles-application-on-the-target-and-viewing-the-result-on-the-displayport" title="Permalink to this headline">¶</a></h2>
<div class="section" id="preparing-the-sd-card">
<h3>Preparing the SD Card<a class="headerlink" href="#preparing-the-sd-card" title="Permalink to this headline">¶</a></h3>
<p>Now that the Linux images and the application are both built, copy the <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code> and <code class="docutils literal notranslate"><span class="pre">image.ub</span></code> images to an SD card and load the SD card in the ZCU102 board/</p>
</div>
<div class="section" id="running-the-application-on-a-linux-target">
<h3>Running the Application on a Linux Target<a class="headerlink" href="#running-the-application-on-a-linux-target" title="Permalink to this headline">¶</a></h3>
<div class="section" id="setting-up-the-target">
<h4>Setting Up the Target<a class="headerlink" href="#setting-up-the-target" title="Permalink to this headline">¶</a></h4>
<ol>
<li><p>Load the SD card into the J100 connector of the ZCU102 board.</p></li>
<li><p>Connect the micro USB cable to micro USB port J83 on ZCU102 board. Connect the other end to an open USB port on the host machine. Also, make sure that the JTAG cable is disconnected. If the JTAG cable is connected, the system might hang.</p></li>
<li><p>Connect a DisplayPort monitor to the ZCU102 board. The DisplayPort cable from the DP monitor can be connected to the DisplayPort connector on the ZCU102 board.</p>
<blockquote>
<div><p><strong>Note:</strong> These images were tested on a UHD&#64;30 Hz and FullHD&#64;60
Hz DisplayPort capable monitor.</p>
</div></blockquote>
</li>
<li><p>Configure the board to boot in SD boot mode by setting switch SW6 as shown in the following figure.</p>
<p><img alt="docs/Design_Tutorials/MPSoC_Graphic_Subsystem/media/image43.jpeg" src="docs/Design_Tutorials/MPSoC_Graphic_Subsystem/media/image43.jpeg" /></p>
</li>
<li><p>Connect 12V power to the ZCU102 6-Pin Molex connector.</p></li>
<li><p>Start a terminal session, using Tera Term or Minicom depending on the host machine being used, as well as the COM port and baud rate for your system.</p></li>
<li><p>For port settings, verify the COM port in the device manager.</p>
<p>There are four USB-UART interfaces exposed by the ZCU102 board. Select
the COM port associated with the interface with the lowest number. In
this case, for UART-0, select the COM port with interface-0.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="powering-on-the-target-and-running-the-applications">
<h3>Powering On the Target and Running the Applications<a class="headerlink" href="#powering-on-the-target-and-running-the-applications" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Turn on the ZCU102 board using SW1, and wait until Linux loads on the board.</p></li>
<li><p>After Linux loads, log in to the target Linux console using <code class="docutils literal notranslate"><span class="pre">root</span></code> for the login and password.</p></li>
<li><p>Set the display parameters and start <code class="docutils literal notranslate"><span class="pre">Xorg</span></code> with the correct depth.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># export DISPLAY=:0.0</span>
<span class="c1"># /usr/bin/Xorg -depth 16&amp;</span>
</pre></div>
</div>
</li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">tricube</span></code> application.</p>
<p><code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">tricube</span></code></p>
<p>At this point, you can see a rotating multi-colored cube and a
rotating triangle on the display port. Notice that the cube is also
made of multi-colored triangles.</p>
<p><img alt="../../../_images/image118.jpeg" src="../../../_images/image118.jpeg" /></p>
</li>
</ol>
<p>© Copyright 2017-2021 Xilinx, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p>http://www.apache.org/licenses/LICENSE-2.0</p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../Vitis-Embedded-Software-Debugging/Debugging.html" class="btn btn-neutral float-right" title="Vitis Embedded Software Debugging Guide (UG1515) 2021.1" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../Feature_Tutorials/sw-profiling/sw-profiling.html" class="btn btn-neutral float-left" title="Software Profiling Using the Vitis Software Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on February 9, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>