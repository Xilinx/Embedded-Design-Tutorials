


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Design Example 1: Using GPIOs, Timers, and Interrupts" href="7-design1-using-gpio-timer-interrupts.html" />
    <link rel="prev" title="Debugging Standalone Applications with the Vitis Debugger" href="5-debugging-with-vitis-debugger.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Embedded Design Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2021.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">简体中文</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-cn/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">日本語</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Versal-EDT/Versal-EDT.html">Versal ACAP Embedded Design Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ZynqMPSoC-EDT.html">Zynq UltraScale+ MPSoC Embedded Design Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-getting-started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-system-configuration.html">Zynq UltraScale+ MPSoC System Configuration with Vivado</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-build-sw-for-ps-subsystems.html">Building Software for PS Subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-debugging-with-vitis-debugger.html">Debugging Standalone Applications with the Vitis Debugger</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building and Debugging Linux Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-8-creating-linux-images-and-applications-using-petalinux">Example 8: Creating Linux Images and Applications using PetaLinux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#input-and-output-files">Input and Output Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-petalinux-image">Creating a PetaLinux Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verifying-the-image-on-the-zcu102-board">Verifying the Image on the ZCU102 Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-linux-applications-in-the-vitis-ide">Creating Linux Applications in the Vitis IDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preparing-the-linux-agent-for-remote-connection">Preparing the Linux Agent for Remote Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-linux-application-from-the-vitis-ide">Running the Linux Application from the Vitis IDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debugging-a-linux-application-from-the-vitis-ide">Debugging a Linux Application from the Vitis IDE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="7-design1-using-gpio-timer-interrupts.html">System Design Example: Using GPIO, Timer and Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-boot-and-configuration.html">Boot and Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="9-secure-boot.html">Secure Boot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Zynq7000-EDT/Zynq7000-EDT.html">Zynq-7000 Embedded Design Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Feature Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Feature_Tutorials/debuggable-fsbl/debuggable-fsbl.html">First Stage Boot Loader (FSBL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Feature_Tutorials/sw-profiling/sw-profiling.html">Profiling Applications with System Debugger</a></li>
</ul>
<p class="caption"><span class="caption-text">Design Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Design_Tutorials/MPSoC_Graphic_Subsystem/README.html">Example Setup for a Graphics and DisplayPort Based Sub-System</a></li>
</ul>
<p class="caption"><span class="caption-text">Debugging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vitis-Embedded-Software-Debugging/Debugging.html">Vitis Embedded Software Debugging Guide (UG1515) 2021.1</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../User_Guides/SPA-UG/SPA-UG.html">System Performance Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../User_Guides/Performance_Benchmark/Dhrystone/README.html">Versal Dhrystone Benchmark</a></li>
</ul>
<p class="caption"><span class="caption-text">Previous Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://xilinx.github.io/Embedded-Design-Tutorials/docs/2021.1/docs/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="http://xilinx.github.io/Embedded-Design-Tutorials/docs/2020.2/docs/index.html">2020.2</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../_sources/docs/Introduction/ZynqMPSoC-EDT/6-build-linux-sw-for-ps.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Embedded Design Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="ZynqMPSoC-EDT.html">Zynq UltraScale+ MPSoC Embedded Design Tutorial</a> &raquo;</li>
        
      <li>Building and Debugging Linux Applications</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/docs/Introduction/ZynqMPSoC-EDT/6-build-linux-sw-for-ps.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-and-debugging-linux-applications">
<h1>Building and Debugging Linux Applications<a class="headerlink" href="#building-and-debugging-linux-applications" title="Permalink to this headline">¶</a></h1>
<p>The earlier examples highlighted the creation of bootloader images and bare-metal applications for APU, RPU, and PMU using the Vitis™ IDE. This chapter demonstrates how to develop Linux applications.</p>
<div class="section" id="example-8-creating-linux-images-and-applications-using-petalinux">
<h2>Example 8: Creating Linux Images and Applications using PetaLinux<a class="headerlink" href="#example-8-creating-linux-images-and-applications-using-petalinux" title="Permalink to this headline">¶</a></h2>
<p>In this example, you will configure and build a Linux operating system platform for an Arm™ Cortex-A53 core based APU on a Zynq® UltraScale+™ MPSoC. You can configure and build Linux images using the PetaLinux tool flow, along with the board-specific BSP. The Linux application is developed in the Vitis IDE.</p>
<div class="section" id="input-and-output-files">
<h3>Input and Output Files<a class="headerlink" href="#input-and-output-files" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Input:</p>
<ul>
<li><p>Hardware XSA (<cite>edt_zcu102_wrapper.xsa</cite> generated in Example 1)</p></li>
<li><p><a class="reference external" href="https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/embedded-design-tools.html">ZCU102 PetaLinux
BSP</a></p></li>
</ul>
</li>
<li><p>Output:</p>
<ul>
<li><p>PetaLinux boot images (<cite>BOOT.BIN</cite>, <cite>image.ub</cite>)</p></li>
<li><p>PetaLinux application (hello_linux)</p></li>
</ul>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ol class="arabic simple">
<li><p>This example requires a Linux host machine with PetaLinux installed. Refer to the <em>PetaLinux Tools Documentation: Reference Guide</em> (<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=latest;d=ug1144-petalinux-tools-reference-guide.pdf">UG1144</a>) for information about dependencies for PetaLinux 2021.2.</p></li>
<li><p>This example uses the <a class="reference external" href="https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/embedded-design-tools.html">ZCU102 PetaLinux BSP</a> to create a PetaLinux project. Ensure that you have downloaded the ZCU102 BSP for PetaLinux as instructed on the <a class="reference external" href="https://www.xilinx.com/member/forms/download/xef.html?filename=xilinx-zcu102-v2021.2-final.bsp">PetaLinux Tools download page</a>.</p></li>
</ol>
</div>
</div>
<div class="section" id="creating-a-petalinux-image">
<span id="id2"></span><h3>Creating a PetaLinux Image<a class="headerlink" href="#creating-a-petalinux-image" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Create a PetaLinux project using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-create -t project -s &lt;path to the xilinx-zcu102-v2021.2-final.bsp&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">xilinx-zcu102-v2021.2-final.bsp</span></code> is the PetaLinux BSP for the ZCU102 Production Silicon Rev 1.0 Board.</p>
</div>
<p>This creates a PetaLinux project directory, <code class="docutils literal notranslate"><span class="pre">xilinx-zcu102-2021.2</span></code>.</p>
</li>
<li><p>Reconfigure the project with <cite>edt_zcu102_wrapper.xsa</cite>:</p>
<ul>
<li><p>The created PetaLinux project uses the default hardware setup in the ZCU102 Linux BSP. In this example, you will reconfigure the
PetaLinux project based on the Zynq UltraScale+ hardware platform that you configured using the Vivado® Design Suite in <a class="reference internal" href="3-system-configuration.html"><span class="doc">Zynq
UltraScale+ MPSoC Processing System Configuration</span></a>.</p></li>
<li><p>Copy the hardware platform <cite>edt_zcu102_wrapper.xsa</cite> to the Linux host machine.</p></li>
<li><p>Reconfigure the project using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> xilinx-zcu102-2021.2
petalinux-config --get-hw-description<span class="o">=</span>&lt;path containing edt_zcu102_wrapper.xsa&gt;
</pre></div>
</div>
</li>
</ul>
<p>This command opens the PetaLinux Configuration window. You can review these settings. If required, make changes in the configuration. For this example, the default settings from the BSP are sufficient to generate the required boot images.</p>
<p>If you would prefer to skip the configuration window and keep the default settings, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-config --get-hw-description<span class="o">=</span>&lt;path containing edt_zcu102_wrapper.xsa&gt; --silentconfig
</pre></div>
</div>
</li>
<li><p>Build the PetaLinux project:</p>
<ol class="arabic">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">&lt;PetaLinux-project&gt;</span></code> directory, for example, <code class="docutils literal notranslate"><span class="pre">xilinx-zcu102-2021.2</span></code>, build the Linux images using the
following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-build
</pre></div>
</div>
</li>
<li><p>After the above statement executes successfully, verify the images and the timestamp in the images directory in the PetaLinux project folder using the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> images/linux
ls -al
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Generate the boot image using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-package --boot --fsbl zynqmp_fsbl.elf --u-boot
</pre></div>
</div>
<p>This creates a <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code> image file in the <code class="docutils literal notranslate"><span class="pre">&lt;petalinux-project&gt;/images/linux/</span></code> directory.</p>
<p>The logs indicate that the above command includes PMU_FW and Trusted Firmware-A (TF-A) in <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code>. You can also add <code class="docutils literal notranslate"><span class="pre">--pmufw</span> <span class="pre">&lt;PMUFW_ELF&gt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">--atf</span> <span class="pre">&lt;ATF_ELF&gt;</span></code> in the above command if you would prefer to use custom firmware images. Refer to <code class="docutils literal notranslate"><span class="pre">petalinux-package</span> <span class="pre">--boot</span> <span class="pre">--help</span></code> for more details about the boot image package command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The option to add bitstream, <code class="docutils literal notranslate"><span class="pre">--fpga</span></code>, is missing from the above command intentionally because so far the hardware configuration is based only on a PS with no design in the PL. If a bitstream is present in the design, <code class="docutils literal notranslate"><span class="pre">--fpga</span></code> can be added in the <code class="docutils literal notranslate"><span class="pre">petalinux-package</span></code> command as shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-package --boot --fsbl zynqmp_fsbl.elf --fpga system.bit --pmufw pmufw.elf --atf bl31.elf --u-boot u-boot.elf
</pre></div>
</div>
</div>
</li>
</ol>
</div>
<div class="section" id="verifying-the-image-on-the-zcu102-board">
<span id="id3"></span><h3>Verifying the Image on the ZCU102 Board<a class="headerlink" href="#verifying-the-image-on-the-zcu102-board" title="Permalink to this headline">¶</a></h3>
<p>To verify the image, follow these steps:</p>
<ol class="arabic">
<li><p>Copy the <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code>, <code class="docutils literal notranslate"><span class="pre">image.ub</span></code>, and <code class="docutils literal notranslate"><span class="pre">boot.scr</span></code> files to the SD card. Here, <code class="docutils literal notranslate"><span class="pre">boot.scr</span></code> is read by U-Boot to load the kernel and
rootfs.</p></li>
<li><p>Load the SD card into the ZCU102 board, in the J100 connector.</p></li>
<li><p>Connect a micro USB cable from the ZCU102 board USB UART port (J83) to the USB port on the host machine.</p></li>
<li><p>Configure the board to boot in SD boot mode by setting switch SW6 as shown in the following figure.</p>
<img alt="../../../_images/image431.jpeg" src="../../../_images/image431.jpeg" />
</li>
<li><p>Connect 12V power to the ZCU102 6-pin Molex connector.</p></li>
<li><p>Start a serial terminal session using Tera Term or Minicom depending on the host machine being used. set the COM port and baud rate for
your system as shown in the following figure.</p>
<div class="figure align-default" id="id6">
<img alt="../../../_images/image44.png" src="../../../_images/image44.png" />
<p class="caption"><span class="caption-text">Tera Term Connection</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>For port settings, verify the COM port in the device manager and select the COM port with interface-0.</p></li>
<li><p>Turn on the ZCU102 board using SW1, and wait until Linux loads on the board.</p></li>
</ol>
</div>
<div class="section" id="creating-linux-applications-in-the-vitis-ide">
<h3>Creating Linux Applications in the Vitis IDE<a class="headerlink" href="#creating-linux-applications-in-the-vitis-ide" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Create a Linux domain:</p>
<ol class="arabic">
<li><p>Double-click <strong>platform.spr</strong> in the zcu102_edt platform to open platform configurations.</p></li>
<li><p>Click the <strong>+</strong> button to add a domain.</p></li>
<li><p>Input the following domain parameters:</p>
<ul class="simple">
<li><p>Name: <strong>linux</strong></p></li>
<li><p>OS: <strong>linux</strong></p></li>
<li><p>Keep the other options as-is and click <strong>OK</strong>.</p></li>
</ul>
</li>
<li><p>Review the Linux domain configuration details.</p></li>
<li><p>Build the platform project by clicking the hammer icon.</p>
<div class="figure align-default" id="id7">
<img alt="../../../_images/linux_domain_details.png" src="../../../_images/linux_domain_details.png" />
<p class="caption"><span class="caption-text">Linux domain configuration details</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</li>
</ol>
</li>
<li><p>Create a Linux application:</p>
<ol class="arabic simple">
<li><p>Click <strong>File → New → Application Project</strong>.</p></li>
<li><p>Click <strong>Next</strong> on the welcome page.</p></li>
<li><p>Select platform: <strong>zcu102_edt</strong>. Click <strong>Next</strong>.</p></li>
<li><p>Enter the application project name, <strong>hello_linux</strong>, and the target processor, <strong>psu_cortexa53 SMP</strong>.</p></li>
<li><p>Keep the default domain: <strong>linux</strong>.</p></li>
<li><p>Keep the SYSROOT, rootfs, and kernel image empty, and click <strong>Next</strong>.</p></li>
<li><p>Select the <strong>Linux Hello World</strong> template. Click <strong>Finish</strong>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you input an extracted SYSROOT directory, Vitis can find include files and libraries in SYSROOT. SYSROOT is generated by the PetaLinux project <code class="docutils literal notranslate"><span class="pre">petalinux-build</span> <span class="pre">--sdk</span></code>. Refer to the <em>PetaLinux Tools Documentation: Reference Guide</em> (<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=latest;d=ug1144-petalinux-tools-reference-guide.pdf">UG1144</a>) for more information about SYSROOT generation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you input a rootfs and kernel image, Vitis can help to generate the <code class="docutils literal notranslate"><span class="pre">SD_card.img</span></code> when building the Linux system project.</p>
</div>
</li>
<li><p>Build the hello_linux application.</p>
<ul class="simple">
<li><p>Select <strong>hello_linux</strong>.</p></li>
<li><p>Click the hammer button to build the application.</p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="preparing-the-linux-agent-for-remote-connection">
<span id="id5"></span><h3>Preparing the Linux Agent for Remote Connection<a class="headerlink" href="#preparing-the-linux-agent-for-remote-connection" title="Permalink to this headline">¶</a></h3>
<p>The Vitis IDE needs a channel to download the application to the running target. When the target runs Linux, it uses TCF Agent running on Linux. TCF Agent is added to the Linux rootfs from the PetaLinux configuration by default. When Linux boots up, it launches TCF Agent automatically. The Vitis IDE talks to TCF Agent on the board using an Ethernet connection.</p>
<ol class="arabic">
<li><p>Prepare for running the Linux application on the ZCU102 board. Vitis can download the Linux application to the board, which runs Linux through a network connection. It is important to ensure that the connection between the host machine and the board works well.</p>
<ol class="arabic simple">
<li><p>Make sure the USB UART cable is still connected with the ZCU102 board. Turn on your serial console and connect to the UART port.</p></li>
<li><p>Connect an Ethernet cable between the host and the ZCU102 board.</p>
<ul class="simple">
<li><p>It can be a direct connection from the host to the ZCU102 board.</p></li>
<li><p>You can also connect the host and the ZCU102 board using a router.</p></li>
</ul>
</li>
<li><p>Power on the board and let Linux run on ZCU102 (see <a class="reference internal" href="#verifying-the-image-on-the-zcu102-board"><span class="std std-ref">Verifying the Image on the ZCU102 Board</span></a>).</p></li>
<li><p>Set up a networking software environment.</p>
<ol class="arabic simple">
<li><p>If the host and the board are connected directly, run <code class="docutils literal notranslate"><span class="pre">ifconfig</span> <span class="pre">eth0</span> <span class="pre">192.168.1.1</span></code> to setup an IP address on the board.</p></li>
<li><p>Go to <strong>Control Panel → Network and Internet → Network and Sharing Center</strong>, and click <strong>Change Adapter Settings</strong>.</p></li>
<li><p>Find your Ethernet adapter, then right-click and select <strong>Properties</strong>.</p></li>
<li><p>Double-click <strong>Internet Protocol Version 4 (TCP/IPv4)</strong>, and select <strong>Use the following IP address</strong>.</p></li>
<li><p>Input the IP address <strong>192.168.1.2</strong> and click <strong>OK</strong>.</p>
<ul class="simple">
<li><p>If the host and the board are connected through a router, they should be able to get an IP address from the router. If the Ethernet cable is plugged in after the board boots up, you can get the IP address manually by running the <code class="docutils literal notranslate"><span class="pre">udhcpc</span> <span class="pre">eth0</span></code> command, which returns the board IP address.</p></li>
<li><p>Have the host and the ZCU102 board ping each other to make sure the network is set up correctly.</p></li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
<li><p>Set up the Linux agent in the Vitis IDE.</p>
<ol class="arabic">
<li><p>Click the <strong>Target Connections</strong> icon on the toolbar. It can also be launched by going to <strong>Window → Show View…</strong> and then looking for the target.</p>
<div class="figure align-default" id="id8">
<img alt="Vitis Show View search for Target Connections" src="../../../_images/vitis_launch_target_connections1.png" />
<p class="caption"><span class="caption-text">Vitis Show View search for Target Connections</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>In the Target Connections window, double-click <strong>Linux TCF Agent → Linux Agent[default]</strong>.</p></li>
<li><p>Input the IP address of your board.</p></li>
<li><p>Click <strong>Test Connection</strong>.</p>
<div class="figure align-default" id="id9">
<img alt="Vitis test connection details" src="../../../_images/vitis_target_connection_details1.png" />
<p class="caption"><span class="caption-text">Vitis test connection details</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>Vitis should return a pop-up confirmation for success.</p>
<div class="figure align-default" id="id10">
<img alt="Vitis test connection success" src="../../../_images/vitis_test_connection_success1.png" />
<p class="caption"><span class="caption-text">Vitis test connection success</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="running-the-linux-application-from-the-vitis-ide">
<h3>Running the Linux Application from the Vitis IDE<a class="headerlink" href="#running-the-linux-application-from-the-vitis-ide" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Run the Linux application:</p>
<ol class="arabic">
<li><p>Right-click <strong>hello_linux</strong>, and select <strong>Run As → Run Configurations</strong>.</p></li>
<li><p>Expand <strong>Single Application Debug</strong> and select <strong>Debugger_hello_linux-Default</strong>.</p></li>
<li><p>Review the configurations:</p>
<ul class="simple">
<li><p>Debug type: <strong>Linux Application Debug</strong></p></li>
<li><p>Connection: <strong>Linux Agent</strong></p></li>
</ul>
</li>
<li><p>Click <strong>Run</strong>.</p>
<div class="figure align-default">
<img alt="Vitis Linux Run Configurations" src="../../../_images/vitis_linux_run_configurations1.png" />
</div>
<p>The console should print <strong>Hello World</strong>.</p>
<div class="figure align-default">
<img alt="Linux Hello World run result" src="../../../_images/linux_hello_world1.png" />
</div>
</li>
</ol>
</li>
<li><p>Disconnect the connection:</p>
<ul class="simple">
<li><p>Click the <strong>Terminate</strong> button on the toolbar or press <strong>Ctrl+F2</strong>.</p></li>
<li><p>Click the <strong>Disconnect</strong> button on the toolbar.</p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="debugging-a-linux-application-from-the-vitis-ide">
<h3>Debugging a Linux Application from the Vitis IDE<a class="headerlink" href="#debugging-a-linux-application-from-the-vitis-ide" title="Permalink to this headline">¶</a></h3>
<p>Debugging Linux applications requires the Linux agent to be set up properly. Refer to <a class="reference internal" href="#preparing-the-linux-agent-for-remote-connection"><span class="std std-ref">Preparing the Linux Agent for Remote Connection</span></a> for detailed steps.</p>
<ol class="arabic">
<li><p>Debug the Linux application:</p>
<ol class="arabic simple">
<li><p>Right-click <strong>hello_linux</strong>, then select <strong>Debug As → Debug Configurations</strong>.</p></li>
<li><p>Expand <strong>Single Application Debug</strong> and select <strong>Debugger_hello_linux-Default</strong>.</p></li>
<li><p>Review the configurations:</p>
<ul class="simple">
<li><p>Debug type: <strong>Linux Application Debug</strong></p></li>
<li><p>Connection: <strong>Linux Agent</strong></p></li>
</ul>
</li>
<li><p>Click <strong>Debug</strong>.</p></li>
</ol>
<p>The debug configuration has identical options to the run configuration. The difference between debugging and running is that debugging stops at the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function.</p>
</li>
<li><p>Try the debugging features:</p>
<p>Hello World is a simple application. It does not contain much to debug, but you can try the following to explore the Vitis debugger:</p>
<ul class="simple">
<li><p>Review the tabs on the upper right corner: Variables, Breakpoints, Expressions, and the rest.</p></li>
<li><p>Review the call stack on the left.</p></li>
<li><p>The next line to execute has a green background.</p></li>
<li><p>Step over by clicking the icon on the toolbar or pressing <strong>F6</strong> on the keyboard. The printed string will be shown on the Console
panel.</p></li>
</ul>
<img alt="../../../_images/vitis_debugger_hello_linux.png" src="../../../_images/vitis_debugger_hello_linux.png" />
</li>
<li><p>Disconnect the connection:</p>
<ul class="simple">
<li><p>Click the <strong>Terminate button</strong> on the toolbar or press <strong>Ctrl+F2</strong>.</p></li>
<li><p>Click the <strong>Disconnect</strong> button on the toolbar.</p></li>
</ul>
</li>
</ol>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In this chapter, you learned how to:</p>
<ul class="simple">
<li><p>Create a Linux boot image with PetaLinux.</p></li>
<li><p>Create simple Linux applications with the Vitis IDE.</p></li>
<li><p>Run and debug using the Vitis IDE.</p></li>
</ul>
<p>In the <a class="reference internal" href="7-design1-using-gpio-timer-interrupts.html"><span class="doc">next chapter</span></a>, you will connect all points previously introduced and create a system design.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="7-design1-using-gpio-timer-interrupts.html" class="btn btn-neutral float-right" title="Design Example 1: Using GPIOs, Timers, and Interrupts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="5-debugging-with-vitis-debugger.html" class="btn btn-neutral float-left" title="Debugging Standalone Applications with the Vitis Debugger" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on February 9, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>