


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/pro.min.css" media="all" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Linux Boot Image Configuration" href="7-linux-booting-debug.html" />
    <link rel="prev" title="Using the GP Port in Zynq Devices" href="5-using-gp-port-zynq.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> エンベデッド デザイン チュートリアル
          

          
          </a>

          
            
            
              <div class="version">
                2021.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">简体中文</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-cn/index.html">Master</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">日本語</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">入門チュートリアル</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ZynqMPSoC-EDT/ZynqMPSoC-EDT.html">Zynq UltraScale+ MPSoC エンベデッド デザイン チュートリアル</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Zynq7000-EDT.html">Zynq-7000 エンベデッド デザイン チュートリアル</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-introduction.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-using-zynq.html">Using the Zynq SoC Processing System</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-debugging-vitis.html">Debugging Standalone Applications with the Vitis Software Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-linux-for-zynq.html">Building and Debugging Linux Applications for Zynq-7000 SoCs</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-using-gp-port-zynq.html">Using the GP Port in Zynq Devices</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using the HP Slave Port with AXI CDMA IP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#integrating-axi-cdma-with-the-zynq-soc-ps-hp-slave-port">Integrating AXI CDMA with the Zynq SoC PS HP Slave Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-7-integrating-axi-cdma-with-the-ps-hp-slave-port">Example 7: Integrating AXI CDMA with the PS HP Slave Port</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#input-and-output-files">Input and Output Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-the-vivado-design">Update the Vivado Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="#designing-standalone-application-software-for-the-design">Designing Standalone Application Software for the Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-software-programming-model">Application Software Programming Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-the-standalone-cdma-application">Creating the Standalone CDMA Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-cdma-the-app-on-zc702">Running CDMA the App on ZC702</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="7-linux-booting-debug.html">Linux Boot Image Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-custom-ip-driver-linux.html">Creating Custom IP and Device Drivers for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="Zynq7000-EDT.html#example-projects">Example Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Zynq7000-EDT.html#references">References</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">機能チュートリアル</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Feature_Tutorials/debuggable-fsbl/debuggable-fsbl.html">First Stage Boot Loader (FSBL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Feature_Tutorials/sw-profiling/sw-profiling.html">システム デバッガーを使用したアプリケーションのプロファイル</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">デバッグ ガイド</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vitis-Embedded-Software-Debugging/Debugging.html">Vitis エンベデッド ソフトウェア デバッグ ガイド (UG1515) 2021.1</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ユーザー ガイド</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../User_Guides/SPA-UG/SPA-UG.html">システム パフォーマンス解析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../User_Guides/Performance_Benchmark/Dhrystone/README.html">Versal Dhrystone ベンチマーク</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../_sources/docs/Introduction/Zynq7000-EDT/6-using-hp-port.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">エンベデッド デザイン チュートリアル</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Zynq7000-EDT.html">Zynq-7000 Embedded Design Tutorial</a> &raquo;</li>
        
      <li>Using the HP Slave Port with AXI CDMA IP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/docs/Introduction/Zynq7000-EDT/6-using-hp-port.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-hp-slave-port-with-axi-cdma-ip">
<h1>Using the HP Slave Port with AXI CDMA IP<a class="headerlink" href="#using-the-hp-slave-port-with-axi-cdma-ip" title="Permalink to this headline">¶</a></h1>
<p>In this chapter, you will instantiate AXI CDM\A (Central DMA) IP in fabric and
integrate it with the processing system high performance (HP) 64-bit
slave port. In this system, a AXI CDMA instance acts as a master device to copy an
array of the data from the source buffer location to the destination
buffer location in the DDR system memory. The AXI CDMA uses the processing
system HP slave port to get read/write access to the DDR system memory.</p>
<p>You will write standalone application software and Linux OS based
application software using mmap() for the data transfer using the AXI CDMA
block. You will also execute both standalone and Linux-based
application software separately on the ZC702 board.</p>
<div class="section" id="integrating-axi-cdma-with-the-zynq-soc-ps-hp-slave-port">
<h2>Integrating AXI CDMA with the Zynq SoC PS HP Slave Port<a class="headerlink" href="#integrating-axi-cdma-with-the-zynq-soc-ps-hp-slave-port" title="Permalink to this headline">¶</a></h2>
<p>Xilinx® Zynq®-7000 SoC devices internally provide four high
performance (HP) AXI slave interface ports that connect the
programmable logic (PL) to asynchronous FIFO interface (AFI) blocks in
the processing system (PS). The HP ports enable a high throughput data
path between AXI masters in the programmable logic and the processing
system’s memory system (DDR and on- chip memory). HP slave ports are
configurable to 64-bit or 32-bit interfaces.</p>
<p>In this section, you will create a design using AXI CDMA intellectual
property (IP) as master in fabric and integrate it with the PS HP 64
bit slave port. The block diagram for the system is as shown in the
following figure.</p>
<p><img alt="../../../_images/image61.jpeg" src="../../../_images/image61.jpeg" /></p>
<p>This system covers the following connections:</p>
<ul class="simple">
<li><p>The AXI CDMA slave port is connected to the PS general purpose master
port 1 (<code class="docutils literal notranslate"><span class="pre">M_AXI_GP1</span></code>). It is used by the PS CPU to configure the AXI
CDMA register set for the data transfer and also to check the
status.</p></li>
<li><p>The AXI CDMA master port is connected to the PS high performance slave
port 0 (<code class="docutils literal notranslate"><span class="pre">S_AXI_HP0</span></code>). It is used by the AXI CDMA to read from the
DDR system memory. It acts as the source buffer location for the
CDMA during data transfer.</p></li>
<li><p>The AXI CDMA master port is connected to the PS high performance slave
port 2 (<code class="docutils literal notranslate"><span class="pre">S_AXI_HP2</span></code>). It is used by the AXI CDMA to write the data
to the DDR system memory. It acts as a destination buffer location
for the CDMA during the Data transfer.</p></li>
<li><p>The AXI CDMA interrupt is connected from the fabric to the PS section
interrupt controller. After data transfer or errors during data
transaction, the AXI CDMA interrupt is triggered.</p></li>
</ul>
<p>In this system, you will configure the HP slave port 0 to access a DDR
memory location range from 0x20000000 to 0x2fffffff. This DDR system
memory location acts as the source buffer location to CDMA for reading
the data.</p>
<p>You will also configure HP slave port 2 to access a DDR memory
location range from 0x30000000 to 0x3fffffff. This DDR system memory
location acts as a destination location to CDMA for writing the data.</p>
<p>You will also configure the AXI CDMA IP data width of the data
transfer channel to 1024 bits with the maximum burst length set to 32.
With this setting, the CDMA maximum transfer size is set to 1024x32 bits
in one transaction.</p>
<p>You will write the application software code for the above system.
When you execute the code, it first initializes the source buffer
memory with the specified data pattern and also clears the destination
buffer memory by writing all zeroes to the memory location. It then
starts configuring the CDMA register for the DMA transfer. It writes
the source buffer location, destination buffer location, and number of
bytes to be transferred to the CDMA registers and waits for the CDMA
interrupt. When the interrupt occurs, it checks the status of the DMA
transfers.</p>
<p>If the data transfer status is successful, it compares the source
buffer data with the destination buffer data and displays the
comparison result on the serial terminal.</p>
<p>If the data transfer status is an error, it displays the error status
on the serial terminal and stops execution.</p>
</div>
<div class="section" id="example-7-integrating-axi-cdma-with-the-ps-hp-slave-port">
<h2>Example 7: Integrating AXI CDMA with the PS HP Slave Port<a class="headerlink" href="#example-7-integrating-axi-cdma-with-the-ps-hp-slave-port" title="Permalink to this headline">¶</a></h2>
<div class="section" id="input-and-output-files">
<h3>Input and Output Files<a class="headerlink" href="#input-and-output-files" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Input files:</p>
<ul>
<li><p>Vivado design from <a class="reference external" href="5-using-gp-port-zynq.md#example-6-adding-peripheral-pl-ip">Example 6</a></p></li>
<li><p>Vitis workspace</p></li>
</ul>
</li>
<li><p>Output files:</p>
<ul>
<li><p>Updated Vivado design and exported hardware handoff <code class="docutils literal notranslate"><span class="pre">system_wrapper.xsa</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cdma_app.elf</span></code> to control and test the AXI CDMA IP</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="update-the-vivado-design">
<h3>Update the Vivado Design<a class="headerlink" href="#update-the-vivado-design" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p>Start with the system you created in <a class="reference external" href="5-using-gp-port-zynq.md#example-6-adding-peripheral-pl-ip">Example 6: Adding Peripheral PL IP</a>.</p>
<ul class="simple">
<li><p>Open the Vivado® design from <a class="reference external" href="5-using-gp-port-zynq.md#example-6-adding-peripheral-pl-ip">Example 6</a>.</p></li>
<li><p>Open the block design from Flow Navigator <strong>Open Block Design</strong>.</p></li>
</ul>
</li>
<li><p>Add the CDMA IP:</p>
<ul class="simple">
<li><p>In the Diagram window, right-click in the blank space and select <strong>Add IP</strong>.</p></li>
<li><p>In the search box, type “CDMA” and double-click the <strong>AXI Central Direct Memory Access</strong> IP to add it to the block design. The AXI
Central Direct Memory Access IP block appears in the Diagram view.</p></li>
</ul>
</li>
<li><p>Add the <strong>Contact</strong> IP to concatenate the interrupt signals:</p>
<ul class="simple">
<li><p>In the Diagram window, right-click in the blank space and select <strong>Add IP</strong>.</p></li>
<li><p>In the search box type “concat” and double-click the <strong>Concat</strong> IP to
add it to the block design. The Concat IP block appears in the
Diagram window. This block is used to concatenate the two
interrupt signals if you are using the prior design with the AXI
Timer.</p></li>
<li><p>Right-click the net from the interrupt port to the <strong>IRQ_F2P[0:0]</strong> port and select <strong>Delete</strong>.</p></li>
<li><p>Click the <strong>IRQ_F2P[0:0]</strong> port and drag to the <strong>dout[1:0]</strong> output
port on the <strong>Concat</strong> IP core to make a connection between the two
ports.</p></li>
<li><p>Click the <strong>interrupt</strong> port on the AXI Timer IP core and drag to the
<strong>In0[0:0]</strong> input port on the Concat IP core to make a connection
between the two ports.</p></li>
<li><p>Click the <strong>cdma_introut</strong> port on the AXI CDMA IP core and drag to the
<strong>In1[0:0]</strong> input port on the Concat IP core to make a connection
between the two ports.</p></li>
</ul>
</li>
<li><p>Customize the PS to enable the <strong>AXI HP0</strong> and <strong>AXI HP2</strong> interface:</p>
<ul class="simple">
<li><p>Right-click the <strong>ZYNQ7 Processing System</strong> core and select
<strong>Customize Block</strong>.</p></li>
<li><p>Select <strong>PS-PL Configuration</strong> and expand the <strong>HP Slave AXI Interface</strong>.</p></li>
<li><p>Select the checkbox for <strong>S AXI HP0 interface</strong> and for <strong>S AXI HP2 interface</strong>.</p></li>
<li><p>Click <strong>OK</strong> to accept the changes.</p></li>
</ul>
</li>
<li><p>Customize the CDMA IP:</p>
<ul class="simple">
<li><p>Right-click the <strong>AXI CDMA IP</strong> core and select <strong>Customize Block</strong>.</p></li>
<li><p>Set the block settings in the Re-customize IP wizard page as
follows:</p></li>
</ul>
</li>
</ol>
<pre><code>| System Property                 | Setting or Command to Use |
| ------------------------------- | ------------------------- |
| Enable Scatter Gather           | Unchecked                 |
| Disable 4K Boundary Checks      | Unchecked                 |
| Allow Unaligned Transfers       | Unchecked                 |
| Write/Read Data Width           | 1024                      |
| Write/Read Burst Size           | 32                        |
| Enable Asynchronous Mode (Auto) | Unchecked                 |
| Enable CDMA Store and Forward   | Unchecked                 |
| Address Width                   | 32                        |
</code></pre><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">Click</span> <span class="o">**</span><span class="n">OK</span><span class="o">**</span> <span class="n">to</span> <span class="n">accept</span> <span class="n">the</span> <span class="n">changes</span><span class="o">.</span>
</pre></div>
</div>
<ol>
<li><p>Connect the blocks</p>
<ul class="simple">
<li><p>Click the <strong>Run Connection Automation</strong> link in the Diagram window
to automate the remaining connections.</p></li>
<li><p>In the Run Connection Automation dialog box make sure the <strong>All Automation</strong> box is checked, then click <strong>OK</strong> to accept the
default connections. The finished diagram should look like the following figure.</p></li>
</ul>
<p><img alt="block diagram" src="../../../_images/image621.png" /></p>
<p><strong>Note:</strong> You might receive a critical warning message regarding
forcibly mapping a net into a conflicting address. Address the error
by manually updating the memory mapped address in the next steps.
Click <strong>OK</strong> if you see the error message.</p>
</li>
<li><p>Assign the address manually. In most cases, Vivado connection automation can set up the address correctly. In the current use case, it is confused by the physical connection because HP0 and HP2 now cover the same address range. Resolve this issue by making sure that the address range of these two ports does not overlap.</p>
<ul class="simple">
<li><p>Select the <strong>Address Editor</strong> window.</p></li>
</ul>
<p><img alt="../../../_images/image631.png" src="../../../_images/image631.png" /></p>
<ul class="simple">
<li><p>In the Address Editor window, expand <strong>axi_cdma_0 → axi_cdma_0/Data</strong>. Right-click <strong>HP2_DDR_LOWOCM</strong> and select <strong>Unassign</strong>.</p></li>
<li><p>In the Range column for <strong>S_AXI_HP0</strong>, select <strong>256M</strong>.</p></li>
<li><p>Under Offset Address for <strong>S_AXI_HP0</strong>, set a value of
<strong>0x2000_0000</strong>.</p></li>
<li><p>In the Address Editor window, expand <strong>axi_cdma_0 → axi_cdma_0/Data → Unassigned</strong>. Right-click <strong>HP2_DDR_LOWOCM</strong> and select <strong>Assign</strong>.</p></li>
<li><p>In the Range column for <strong>S_AXI_HP2</strong>, select <strong>256M</strong>.</p></li>
<li><p>Under Offset Address for <strong>S_AXI_HP2</strong>, set a value of <strong>0x3000_0000</strong>.</p></li>
</ul>
<p><img alt="Final Address Settings" src="../../../_images/image64.png" /></p>
</li>
<li><p>Generate the bitstream:</p>
<ul class="simple">
<li><p>In the Flow Navigator, select <strong>Generate Bitstream</strong> under <strong>PROGRAM AND DEBUG</strong>. The Save Project dialog box opens.</p></li>
<li><p>Ensure that the <strong>Block Design - system</strong> check box is selected, then click <strong>Save</strong>.</p></li>
<li><p>A message might appear that states synthesis is out of date. If it does, click <strong>Yes</strong>.</p></li>
</ul>
</li>
<li><p>Export the hardware after bitstream generation completes:</p>
<ul class="simple">
<li><p>Click <strong>File → Export → Export Hardware</strong>.</p></li>
</ul>
<p><strong>Note:</strong> Make sure to select <strong>Include bitstream</strong> instead of <strong>Pre-synthesis</strong> on the Output page of the Export Hardware Platform wizard.</p>
</li>
</ol>
</div>
<div class="section" id="designing-standalone-application-software-for-the-design">
<h3>Designing Standalone Application Software for the Design<a class="headerlink" href="#designing-standalone-application-software-for-the-design" title="Permalink to this headline">¶</a></h3>
<p>The CDMA-based system that you designed in this chapter requires
application software to execute on the board. This section describes
the details of this software.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">main()</span></code> function in the application software is the entry point for
the execution. It initializes the source memory buffer with the
specified test pattern and clears the destination memory buffer by
writing all zeroes.</p>
<p>The application software then configures the CDMA register sets by
providing information such as source buffer and destination buffer
starting locations. To initiate DMA transfer, it writes the number of
bytes to be transferred in the CDMA register and waits for the CDMA
interrupt to happen. After the interrupt, it checks the status of the
DMA transfer and compares the source buffer with the destination
buffer. Finally, it prints the comparison result in the serial
terminal and stops running.</p>
</div>
<div class="section" id="application-software-programming-model">
<h3>Application Software Programming Model<a class="headerlink" href="#application-software-programming-model" title="Permalink to this headline">¶</a></h3>
<p>The application software does the following tasks:</p>
<ol>
<li><p>Initializes the source buffer with the specified test pattern. The
source buffer location ranges from 0x20000000 to 0x2fffffff.</p>
<p>Clears the destination buffer by writing all zeroes into the
destination address range. The destination buffer location ranges from
0x30000000 to 0x3fffffff.</p>
</li>
<li><p>Initializes the AXI CDMA IP and does the following:</p>
<p>a.  Associates a CDMA callback function with AXI CDMA ISR and enables
the interrupt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">executes</span> <span class="n">during</span> <span class="n">the</span> <span class="n">CDMA</span> <span class="n">interrupt</span><span class="o">.</span> <span class="n">It</span> <span class="n">sets</span> <span class="n">the</span>
<span class="n">interrupt</span> <span class="n">done</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">error</span> <span class="n">flags</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">the</span> <span class="n">DMA</span> <span class="n">transfer</span>
<span class="n">status</span><span class="o">.</span>

<span class="n">Application</span> <span class="n">software</span> <span class="n">waits</span> <span class="k">for</span> <span class="n">the</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">to</span> <span class="n">populate</span> <span class="n">these</span>
<span class="n">flags</span> <span class="ow">and</span> <span class="n">executes</span> <span class="n">the</span> <span class="n">software</span> <span class="n">according</span> <span class="n">to</span> <span class="n">the</span> <span class="n">status</span> <span class="n">flag</span><span class="o">.</span>
</pre></div>
</div>
<p>b.  Configures the CDMA in simple mode.</p>
<p>c.  Checks the status register of the CDMA IP to verify the CDMA idle
status.</p>
<p>d.  Sets the source buffer starting location, 0x20000000, to the CDMA
register.</p>
<p>e.  Sets the destination buffer starting location, 0x30000000, to the
CDMA register.</p>
<p>f.  Sets the number of bytes to transfer to the CDMA register. The
application software starts the DMA transfer.</p>
</li>
<li><p>After the CDMA interrupt is triggered, the DMA transfer is checked.
status.</p>
<p>If the transfer status is successful, the application software
compares the source buffer location with the destination buffer
location and displays the comparison result on the serial terminal,
and then exits from the execution.</p>
<p>If the transfer status displays an error, the software prints the
error status in the serial terminal and stops running.</p>
</li>
</ol>
</div>
<div class="section" id="creating-the-standalone-cdma-application">
<h3>Creating the Standalone CDMA Application<a class="headerlink" href="#creating-the-standalone-cdma-application" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p>Launch the Vitis software platform and open the workspace you worked on before.</p></li>
<li><p>Update the hardware specification:</p>
<ul class="simple">
<li><p>Right-click the <strong>zc702_edt</strong> platform, and select <strong>Update Hardware Specification</strong>.</p></li>
<li><p>Confirm the path and click <strong>OK</strong>.</p></li>
<li><p>Build the platform by clicking the hammer button on the toolbar.</p></li>
</ul>
</li>
<li><p>Select <strong>File → New → Application Project</strong>.</p></li>
</ol>
<ul class="simple">
<li><p>The New Application Project wizard opens. Use the information in the table below to make your selections in the wizard screens.</p></li>
</ul>
<table border="1" class="docutils">
<thead>
<tr>
<th>Screen</th>
<th>System Property</th>
<th>Setting or Command to Use</th>
</tr>
</thead>
<tbody>
<tr>
<td>Platform</td>
<td>Select a platform from repository</td>
<td>Click zc702_edt [custom].</td>
</tr>
<tr>
<td>Application Project Details</td>
<td>Application project name</td>
<td>Enter cdma_app.</td>
</tr>
<tr>
<td>Domain</td>
<td>Select a domain</td>
<td>Click standalone on ps7_cortex9_0.</td>
</tr>
<tr>
<td>Templates</td>
<td>Available Templates</td>
<td>Empty Application</td>
</tr>
</tbody>
</table><ul class="simple">
<li><p>Click <strong>Finish</strong>. The New Application Project wizard closes and the Vitis software
platform creates the cdma_app application project under the Explorer view.</p></li>
</ul>
<ol class="simple">
<li><p>In the Explorer view, expand the <strong>cdma_app</strong> project, right-click
the <strong>src</strong> directory, and select <strong>Import Sources</strong> to open the Import Sources dialog box.</p></li>
<li><p>In the Import Sources dialog box, click the <strong>Browse</strong> button
next to the <strong>From directory</strong> field and specify the design files
folder to <a class="reference external" href="https://github.com/Xilinx/Embedded-Design-Tutorials/tree/master/docs/Introduction/Zynq7000-EDT/ref_files/example7">ref_files/example7</a>.</p></li>
<li><p>Select the <strong>cdma_app.c</strong> file and click <strong>Finish</strong>.</p></li>
<li><p>Build the CDMA application project either by clicking the hammer
button or by right-clicking on the <strong>cdma_app</strong> project and
selecting <strong>Build Project</strong>.</p></li>
</ol>
</div>
<div class="section" id="running-cdma-the-app-on-zc702">
<h3>Running CDMA the App on ZC702<a class="headerlink" href="#running-cdma-the-app-on-zc702" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>Open the serial communication utility with baud rate set to
<strong>115200</strong>.</p>
<p><strong>Note:</strong> This is the baud rate that the UART is programmed to on
Zynq devices.</p>
</li>
<li><p>Make sure that the boot mode of the board is set to JTAG and power on.</p>
<p><strong>Note:</strong> Refer to <a class="reference internal" href="2-using-zynq.html"><span class="doc">Board Setup in Example 2</span></a>
for information about setting up the board.</p>
</li>
<li><p>Run the project.</p>
<ul class="simple">
<li><p>Right-click <strong>cdma_app</strong> and select <strong>Run as → Run on Hardware</strong></p></li>
</ul>
</li>
<li><p>Check the status of the CDMA transfer in the serial terminal. If the
transfer is successful, the message “DMA Transfer is Successful”
displays. Otherwise, the serial terminal displays an error
message.</p>
<p>The expected result on the serial console is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span> <span class="n">Entering</span> <span class="n">main</span><span class="p">()</span> <span class="o">---</span>
<span class="n">Start</span> <span class="n">Transfer</span>

<span class="o">---</span> <span class="n">Transfer</span> <span class="n">Done</span> <span class="o">---</span>
<span class="n">Start</span> <span class="n">Transfer</span>

<span class="o">---</span> <span class="n">Transfer</span> <span class="n">Done</span> <span class="o">---</span>
<span class="n">XAxiCdma_Interrupt</span><span class="p">:</span> <span class="n">Passed</span>
<span class="n">DMA</span> <span class="n">Transfer</span> <span class="ow">is</span> <span class="n">Successful</span>
</pre></div>
</div>
</li>
</ol>
<p>Up until now, the examples you have been working with have all been developed and debugged in a lab environment. JTAG is required to configure and control the applications. How can you deploy applications to the board so that it can run the applications after booting by itself? See the <a class="reference internal" href="7-linux-booting-debug.html"><span class="doc">next chapter</span></a> for Linux boot image configuration.</p>
<hr class="docutils" />
<p>© Copyright 2015–2021 Xilinx, Inc.</p>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p>http://www.apache.org/licenses/LICENSE-2.0</p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="7-linux-booting-debug.html" class="btn btn-neutral float-right" title="Linux Boot Image Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="5-using-gp-port-zynq.html" class="btn btn-neutral float-left" title="Using the GP Port in Zynq Devices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on August 9, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>