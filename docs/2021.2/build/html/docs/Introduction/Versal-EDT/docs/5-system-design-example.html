


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
	
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="../../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="System Design Example for High-Speed Debug Port with SmartLynq+ Module" href="6-system-design-example-HSDP.html" />
    <link rel="prev" title="Debugging Using the Vitis Software Platform" href="3-debugging.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Tutorials
          

          
          </a>

          
            
            
              <div class="version">
                2021.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">简体中文</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-cn/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">日本語</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../Versal-EDT.html">Versal ACAP Embedded Design Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-getting-started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-cips-noc-ip-config.html">Versal ACAP CIPS and NoC (DDR) IP Core Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="4-boot-and-config.html">Boot and Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-debugging.html">Debugging Using the Vitis Software Platform</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">System Design Example using Scalar Engine and Adaptable Engine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#design-example-using-axi-gpio">Design Example: Using AXI GPIO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-hardware">Configuring Hardware</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-project-freertos-axi-uartlite-application-project-with-rpu">Example Project: FreeRTOS AXI UARTLITE Application Project with RPU</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-project-creating-linux-images-using-petalinux">Example Project: Creating Linux Images Using PetaLinux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#combining-freertos-and-apu-images-using-a-bif-file">Combining FreeRTOS and APU Images using a BIF File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="6-system-design-example-HSDP.html">System Design Example for High-Speed Debug Port (HSDP) with SmartLynq+ Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="A-creating-plm.html">Appendix: Creating the PLM</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ZynqMPSoC-EDT/ZynqMPSoC-EDT.html">Zynq UltraScale+ MPSoC Embedded Design Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Zynq7000-EDT/Zynq7000-EDT.html">Zynq-7000 Embedded Design Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Feature Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Feature_Tutorials/debuggable-fsbl/debuggable-fsbl.html">First Stage Boot Loader (FSBL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Feature_Tutorials/sw-profiling/sw-profiling.html">Profiling Applications with System Debugger</a></li>
</ul>
<p class="caption"><span class="caption-text">Design Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Design_Tutorials/MPSoC_Graphic_Subsystem/README.html">Example Setup for a Graphics and DisplayPort Based Sub-System</a></li>
</ul>
<p class="caption"><span class="caption-text">Debugging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Vitis-Embedded-Software-Debugging/Debugging.html">Vitis Embedded Software Debugging Guide (UG1515) 2021.1</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../User_Guides/SPA-UG/SPA-UG.html">System Performance Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../User_Guides/Performance_Benchmark/Dhrystone/README.html">Versal Dhrystone Benchmark</a></li>
</ul>
<p class="caption"><span class="caption-text">Previous Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://xilinx.github.io/Embedded-Design-Tutorials/docs/2021.1/docs/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="http://xilinx.github.io/Embedded-Design-Tutorials/docs/2020.2/docs/index.html">2020.2</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../../_sources/docs/Introduction/Versal-EDT/docs/5-system-design-example.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Vitis™ Tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../Versal-EDT.html">Versal ACAP Embedded Design Tutorial</a> &raquo;</li>
        
      <li>System Design Example using Scalar Engine and Adaptable Engine</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/docs/Introduction/Versal-EDT/docs/5-system-design-example.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="system-design-example-using-scalar-engine-and-adaptable-engine">
<h1>System Design Example using Scalar Engine and Adaptable Engine<a class="headerlink" href="#system-design-example-using-scalar-engine-and-adaptable-engine" title="Permalink to this headline">¶</a></h1>
<p>This chapter guides you through building a system based on Versal® devices using available tools and supported software blocks. This chapter demonstrates how to use the Vivado® tool to create an embedded design using PL AXI GPIO and PL AXI UART. It also describes how to configure and build the Linux operating system for an Arm® Cortex™-A72 core-based APU on a Versal ACAP device.</p>
<p>Examples using the PetaLinux tool are provided in this chapter.</p>
<div class="section" id="design-example-using-axi-gpio">
<span id="using-axi-gpio"></span><h2>Design Example: Using AXI GPIO<a class="headerlink" href="#design-example-using-axi-gpio" title="Permalink to this headline">¶</a></h2>
<p>The Linux application uses a PL-based AXI GPIO interface to monitor the DIP switch of the board and accordingly control the LEDs on the board. The LED application can run on both the VMK180 and the VCK190 boards.</p>
<p>The RPU application uses the PL-based AXI UART lite to print the debug messages on the AXI UART console instead of using the PS UART console. The PL UART application can run on both the VMK180 and VCK190 boards.</p>
<div class="section" id="configuring-hardware">
<h3>Configuring Hardware<a class="headerlink" href="#configuring-hardware" title="Permalink to this headline">¶</a></h3>
<p>The first step in this design is to configure the PS and PL sections. You can do this using the Vivado IP integrator. Start with adding the required IPs from the Vivado IP catalog and then connect the components to blocks in the PS subsystem. To configure the hardware, follow these steps:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the Vivado Design Suite is open already, jump to step 3.</p>
</div>
<ol class="arabic">
<li><p>Open the Vivado project you created in <a class="reference internal" href="2-cips-noc-ip-config.html"><span class="doc">Versal ACAP CIPS and NoC (DDR) IP Core Configuration</span></a>.</p>
<p><cite>C:/edt/edt_versal/edt_versal.xpr</cite></p>
</li>
<li><p>In the Flow Navigator, under <strong>IP Integrator</strong>, click <strong>Open Block Design</strong>.</p>
<img alt="../../../../_images/image5.png" src="../../../../_images/image5.png" />
</li>
<li><p>Right-click the block diagram and select <strong>Add IP</strong>.</p></li>
</ol>
<div class="section" id="connecting-ip-blocks-to-create-a-complete-system">
<h4>Connecting IP Blocks to Create a Complete System<a class="headerlink" href="#connecting-ip-blocks-to-create-a-complete-system" title="Permalink to this headline">¶</a></h4>
<p>To connect IP blocks to create a system, follow these steps.</p>
<ol class="arabic">
<li><p>Double-click the Versal ACAP CIPS IP core.</p></li>
<li><p>Click <strong>PS-PMC→ PL-PS Interfaces</strong>.</p>
<img alt="../../../../_images/image60.png" src="../../../../_images/image60.png" />
</li>
<li><p>Enable the M_AXI_FPD interface and set the <strong>Number of PL Resets</strong> to 1, as shown in the previous figure.</p></li>
<li><p>Click <strong>Clocking</strong>, and then click on the Output Clocks tab.</p></li>
<li><p>Expand PMC Domain Clocks. Then expand PL Fabric Clocks. Configure the PL0_REF_CLK to 300 MHz as shown in the following figure:</p>
<img alt="../../../../_images/image61.png" src="../../../../_images/image61.png" />
</li>
<li><p>Click <strong>Finish</strong> and <strong>OK</strong> to complete the configuration and return to the block diagram.</p></li>
</ol>
</div>
<div class="section" id="adding-and-configuring-ip-addresses">
<h4>Adding and Configuring IP Addresses<a class="headerlink" href="#adding-and-configuring-ip-addresses" title="Permalink to this headline">¶</a></h4>
<p>To add and configure IP addresses, follow these steps.</p>
<ol class="arabic">
<li><p>Right-click the block diagram and select <strong>Add IP</strong> from the IP catalog.</p></li>
<li><p>Search for AXI GPIO and double-click the <strong>AXI GPIO IP</strong> to add it to your design.</p></li>
<li><p>Add another instance of the AXI GPIO IP into the design.</p></li>
<li><p>Search for <strong>AXI Uartlite</strong> in the IP catalog and add it into the design.</p></li>
<li><p>Click <strong>Run Connection Automation</strong> in the Block Design view.</p>
<img alt="../../../../_images/image62.png" src="../../../../_images/image62.png" />
<p>The Run Connection Automation dialog box opens.</p>
</li>
<li><p>In the Run Connection Automation dialog box, select the All Automation check box.</p>
<img alt="../../../../_images/image63.png" src="../../../../_images/image63.png" />
<p>This checks the automation for all the ports of the AXI GPIO IP.</p>
</li>
<li><p>Click <strong>GPIO</strong> of <cite>axi_gpio_0</cite> and set the Select Board Part Interface to <strong>Custom</strong> as shown below.</p>
<img alt="../../../../_images/image64.jpg" src="../../../../_images/image64.jpg" />
</li>
<li><p>Make the same setting for the GPIO of <cite>axi_gpio_1</cite>.</p></li>
<li><p>Click <strong>S_AXI</strong> of <cite>axi_gpio_0</cite>. Set the configurations as shown in the following figure:</p>
<img alt="../../../../_images/image65.jpg" src="../../../../_images/image65.jpg" />
</li>
<li><p>Make the same setting for S_AXI of <cite>axi_gpio_1</cite>.</p></li>
<li><p>Click <strong>S_AXI</strong> of <cite>axi_uartlite_0</cite>. Set the configurations as shown in the following figure:</p>
<img alt="../../../../_images/s-axi-uartlite.png" src="../../../../_images/s-axi-uartlite.png" />
</li>
<li><p>This configuration sets the following connections:</p>
<ul class="simple">
<li><p>Connects the <cite>S_AXI of AXI_GPIO</cite> and AXI Uartlite to <cite>M_AXI_FPD</cite> of CIPS with SmartConnect as a bridge IP between CIPS and AXI GPIO IPs.</p></li>
<li><p>Enables the processor system reset IP.</p></li>
<li><p>Connects the <cite>pl0_ref_clk</cite> to the processor system reset, AXI GPIO, and the SmartConnect IP clocks.</p></li>
<li><p>Connects the reset of the SmartConnect and AXI GPIO to the <cite>peripheral_aresetn</cite> of the processor system reset IP.</p></li>
</ul>
</li>
<li><p>Click <strong>UART</strong> of <cite>axi_uartlite_0</cite>. Set the configurations as shown in the following figure:</p>
<img alt="../../../../_images/uart.png" src="../../../../_images/uart.png" />
</li>
<li><p>Click <strong>OK</strong>.</p></li>
<li><p>Click <strong>Run Connection Automation</strong> in the block design window and select the All Automation check box.</p></li>
<li><p>Click <strong>ext_reset_in</strong> and configure the setting as shown below.</p>
<img alt="../../../../_images/image66.jpg" src="../../../../_images/image66.jpg" />
<p>This connects the <cite>ext_reset_in</cite> of the processor system reset IP to the <cite>pl_resetn</cite> of the CIPS.</p>
</li>
<li><p>Click <strong>OK</strong>.</p></li>
<li><p>Disconnect the <cite>aresetn</cite> of SmartConnect IP from <cite>peripheral_aresetn</cite> of processor system reset IP.</p></li>
<li><p>Connect the <cite>aresetn</cite> of SmartConnect IP to <cite>interconnect_aresetn</cite> of processor system reset IP.</p>
<img alt="../../../../_images/image67.jpeg" src="../../../../_images/image67.jpeg" />
</li>
<li><p>Double-click the axi_gpio_0 IP to open it.</p></li>
<li><p>Go to the IP Configuration tab and configure the settings as shown in the following figure.</p>
<img alt="../../../../_images/image68.png" src="../../../../_images/image68.png" />
</li>
<li><p>Make the same setting for axi_gpio_1.</p></li>
<li><p>Add four more instances of Slice IP.</p></li>
<li><p>Delete the external pins of the AXI GPIO IP and expand the interfaces.</p></li>
<li><p>Connect the output pin gpio_io_0 of axi_gpio_0 to slice 0 and slice 1.</p></li>
<li><p>Similarly, connect the output pin gpio_io_0 of axi_gpio_1 to slice 2 and slice 3.</p></li>
<li><p>Make the output of Slice IP as External.</p></li>
<li><p>Configure each Slice IP as shown below.</p>
<img alt="../../../../_images/image69.png" src="../../../../_images/image69.png" />
<img alt="../../../../_images/image70.png" src="../../../../_images/image70.png" />
<img alt="../../../../_images/image71.png" src="../../../../_images/image71.png" />
<img alt="../../../../_images/image72.png" src="../../../../_images/image72.png" />
</li>
<li><p>Double-click <strong>axi_uartlite_0</strong> to open the IP.</p></li>
<li><p>In the Board tab, set Board interface as shown below:</p>
<img alt="../../../../_images/board-interface.png" src="../../../../_images/board-interface.png" />
</li>
<li><p>Go to the IP Configuration tab and configure the settings as shown in the following figure.</p>
<img alt="../../../../_images/configure-ip-settings.png" src="../../../../_images/configure-ip-settings.png" />
</li>
<li><p>Add <strong>Clock Wizard IP</strong>. Double-click to open the IP.</p></li>
<li><p>Go to Clocking Features tab and set the configuration as shown below:</p>
<img alt="../../../../_images/clocking-features.png" src="../../../../_images/clocking-features.png" />
</li>
<li><p>Make sure the Source option in <strong>Input Clock Information</strong> is set to <strong>Global buffer</strong>.</p></li>
<li><p>Go to Output clocks tab and configure as follows:</p>
<img alt="../../../../_images/output-clocks-tab.png" src="../../../../_images/output-clocks-tab.png" />
</li>
<li><p>Right-click <cite>pl0_ref_clk</cite> of CIPS and click <strong>Disconnect Pin</strong>.</p></li>
<li><p>Connect the <cite>pl0_ref_clk</cite> from CIPS to input <cite>clk_in1</cite> of the Clocking wizard.</p></li>
<li><p>Connect the output of clocking wizard to <cite>slowest_sync_clock</cite> of Processor System Reset IP.</p>
<p>This will help in avoiding timing failure.</p>
</li>
</ol>
<p>The overall block design is shown in the following figure:</p>
<img alt="../../../../_images/image73.png" src="../../../../_images/image73.png" />
</div>
<div class="section" id="validating-the-design-and-generating-the-output">
<h4>Validating the Design and Generating the Output<a class="headerlink" href="#validating-the-design-and-generating-the-output" title="Permalink to this headline">¶</a></h4>
<p>To validate the design and to generate the output product, follow these steps:</p>
<ol class="arabic">
<li><p>Return to the block design view and save your block design (press <strong>Ctrl+S</strong>).</p></li>
<li><p>Right-click in the white space of the Block Diagram view and select <strong>Validate Design</strong>. Alternatively, you can press the F6 key. A message dialog box opens as shown below.</p>
<p>The Vivado tool will prompt you to map the IPs in the design to an address. Click <strong>Yes</strong>.</p>
<img alt="../../../../_images/assign-address.png" src="../../../../_images/assign-address.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The number of address segments may vary depending on the number of memory mapped IPs in the design.</p>
</div>
<p>Once the validation is complete, A message dialog box opens as shown below:</p>
<img alt="../../../../_images/validation_message.PNG" src="../../../../_images/validation_message.PNG" />
</li>
<li><p>Click <strong>OK</strong> to close the message.</p></li>
<li><p>Click the <strong>Sources</strong> window.</p>
<ol class="arabic">
<li><p>Expand Constraints.</p></li>
<li><p>Right-click on <strong>constrs_1-&gt; ADD Sources</strong>.</p>
<p>The Add Sources window opens.</p>
</li>
<li><p>Choose <strong>Add or Create Constraints</strong> option and click <strong>Next</strong>.</p></li>
<li><p>Choose the .xdc file to be added.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The constraints file is provided as part of the package in the <cite>pl_gpio_uart/constrs</cite> folder.</p>
</div>
</li>
<li><p>Click <strong>Finish</strong>.</p></li>
</ol>
</li>
<li><p>Click <strong>Hierarchy</strong>.</p></li>
<li><p>In the Sources window, under Design Sources, expand <strong>edt_versal_wrapper</strong>.</p></li>
<li><p>Right-click the top-level block design, edt_versal_i : edt_versal (<cite>edt_versal.bd</cite>), and select <strong>Generate Output Products</strong>.</p>
<img alt="../../../../_images/image15.png" src="../../../../_images/image15.png" />
</li>
<li><p>Click <strong>Generate</strong>.</p></li>
<li><p>When the Generate Output Products process completes, click <strong>OK</strong>.</p></li>
<li><p>In the Sources window, click the <strong>IP Sources</strong> view. Here, you can see the output products that you just generated, as shown in the following figure.</p>
<img alt="../../../../_images/image74.png" src="../../../../_images/image74.png" />
</li>
</ol>
</div>
<div class="section" id="synthesizing-implementing-and-generating-the-device-image">
<h4>Synthesizing, Implementing, and Generating the Device Image<a class="headerlink" href="#synthesizing-implementing-and-generating-the-device-image" title="Permalink to this headline">¶</a></h4>
<p>Follow these steps to generate a device image for the design.</p>
<ol class="arabic">
<li><p>Go to <strong>Flow Navigator→ Program and Debug</strong>, click <strong>Generate Device Image</strong> and click <strong>OK</strong>.</p></li>
<li><p>A No Implementation Results Available menu appears. Click <strong>Yes</strong>.</p></li>
<li><p>A Launch Run menu appears. Click <strong>OK</strong>.</p>
<p>When the Device Image Generation completes, the Device Image Generation Completed dialog box opens.</p>
</li>
<li><p>Click <strong>Cancel</strong> to close the window.</p></li>
<li><p>Export hardware after you generate the Device Image.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following steps are optional and you can skip these and go to the <a class="reference external" href="#exporting-hardware">Exporting Hardware</a> section. These steps provide the detailed flow for generating the device image by running synthesis and implementation before generating device image. If you need to understand the flow for generating the device image, follow the steps provided below.</p>
<ol class="arabic">
<li><p>Go to <strong>Flow Navigator→ Synthesis</strong> and click <strong>Run Synthesis</strong>.</p>
<img alt="../../../../_images/image17.png" src="../../../../_images/image17.png" />
</li>
<li><p>If Vivado prompts you to save your project before launching synthesis, click <strong>Save</strong>.</p>
<p>While synthesis is running, a status bar is displayed in the upper right-hand window. This status bar spools for various reasons throughout the design process. The status bar signifies that a process is working in the background. When synthesis is complete, the Synthesis Completed dialog box opens.</p>
</li>
<li><p>Select <strong>Run Implementation</strong> and click <strong>OK</strong>.</p>
<p>When implementation completes, the Implementation Completed dialog box opens.</p>
</li>
<li><p>Select <strong>Generate Device Image</strong> and click <strong>OK</strong>.</p>
<p>When Device Image Generation completes, the Device Image Generation Completed dialog box opens.</p>
</li>
<li><p>Click <strong>Cancel</strong> to close the window.</p>
<p>Export hardware, after you generate Device Image.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="exporting-hardware">
<h4>Exporting Hardware<a class="headerlink" href="#exporting-hardware" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p>From the Vivado main menu, select <strong>File→ Export → Export Hardware</strong>. The Export Hardware dialog box opens.</p></li>
<li><p>Choose <strong>Include bitstream</strong> and click <strong>Next</strong>.</p></li>
<li><p>Provide a name for your exported file (or use the default provided) and choose the location. Click <strong>Next</strong>.</p>
<p>A warning message appears if a hardware module has already been exported. Click <strong>Yes</strong> to overwrite the existing XSA file, if the overwrite message is displayed.</p>
</li>
<li><p>Click <strong>Finish</strong>.</p></li>
</ol>
</div>
</div>
</div>
<div class="section" id="example-project-freertos-axi-uartlite-application-project-with-rpu">
<span id="freertos-axi-uartlite-application-project"></span><h2>Example Project: FreeRTOS AXI UARTLITE Application Project with RPU<a class="headerlink" href="#example-project-freertos-axi-uartlite-application-project-with-rpu" title="Permalink to this headline">¶</a></h2>
<p>This section explains how to configure and build the FreeRTOS application for an Arm Cortex-R5F core based RPU on a Versal device.</p>
<p>The following steps demonstrate the procedure to create a FreeRTOS Application from Arm Cortex-R5F:</p>
<ol class="arabic">
<li><p>Start the Vitis™ IDE and create a new workspace, for example, <code class="docutils literal notranslate"><span class="pre">c:/edt/freertos</span></code>.</p></li>
<li><p>Select <strong>File→ New → Application Project</strong>. The <strong>Creating a New Application Project</strong> wizard opens. If this is the first time that you have launched the Vitis IDE, you can select <strong>Create Application Project</strong> on the Welcome screen as shown in the following figure.</p>
<img alt="../../../../_images/image75.jpeg" src="../../../../_images/image75.jpeg" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Optionally, you can check the box next to <strong>Skip welcome page next time</strong> to skip seeing the welcome page every time.</p>
</div>
</li>
<li><p>There are four components of an application project in the Vitis IDE: a target platform, a system project, a domain and a template. To create a new application project in the Vitis IDE, follow these steps:</p>
<ol class="arabic">
<li><p>A target platform is composed of a base hardware design and the meta-data used in attaching accelerators to declared interfaces. Choose a platform or create a platform project from the XSA that you exported from the Vivado Design Suite.</p></li>
<li><ol class="arabic simple" start="2">
<li><p>Put the application project in a system project, and associate it with a processor.</p></li>
</ol>
</li>
<li><ol class="arabic simple">
<li><p>The domain defines the processor and operating system used for running the host program on the target platform.</p></li>
</ol>
</li>
<li><ol class="arabic simple">
<li><p>Choose a template for the application, to quick start development. Use the following information to make your selections in the wizard screens.</p></li>
</ol>
<p><em>Table 9:</em> <strong>Wizard Information</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 37%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Wizard Screen</p></th>
<th class="head"><p>System Properties</p></th>
<th class="head"><p>Setting or Command to Use</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Platform</p></td>
<td><p>Create a new platform
from hardware (XSA)</p></td>
<td><p>Click Browse to add your
XSA file</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Platform Name</p></td>
<td><p>vck190_platform</p></td>
</tr>
<tr class="row-even"><td><p>Application
Project
Detail</p></td>
<td><p>Application project
name</p></td>
<td><p>freertos_gpio_test</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Select a system project</p></td>
<td><p>+Create New</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>System project name</p></td>
<td><p>freertos_gpio_test_system</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Processor</p></td>
<td><p>versal_cips
_0_pspmc_0_psv_cortexr5_0</p></td>
</tr>
<tr class="row-even"><td><p>Dom</p></td>
<td><p>Select a domain</p></td>
<td><p>+Create New</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Name</p></td>
<td><p>The default name assigned</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Display Name</p></td>
<td><p>The default name assigned</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>Operating System</p></td>
<td><p>freertos10_xilinx</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Processor</p></td>
<td><p>versal_cips
_0_pspmc_0_psv_cortexr5_0</p></td>
</tr>
<tr class="row-odd"><td><p>Templates</p></td>
<td><p>Available</p></td>
<td><p>Freertos Hello</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>Templates</p></td>
<td><p>world</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
<p>The Vitis software platform creates the board support package for the Platform project (<strong>vck190_platform</strong>) and the system project (<strong>freertos_gpio_test_system</strong>) containing an application project named <strong>freertos_gpio_test</strong> under the Explorer view after performing the preceding steps.</p>
</li>
<li><p>Right-click the <cite>freertos_hello_world.c</cite> file under <cite>src/</cite> and delete the <cite>freertos_hello_world.c</cite> file. Copy the freertos source code files from the FreeRTOS project path, <code class="docutils literal notranslate"><span class="pre">&lt;design-package&gt;/ch5_system_design_example_source__files/rpu/</span></code> to the <code class="docutils literal notranslate"><span class="pre">src/</span></code> direcrtory.</p></li>
<li><p>Configure the Vitis IDE to enable AXI UARTLITE for RPU application debug console under the FreeRTOS Board Support Package.</p>
<p>Navigate to <cite>platform.spr</cite> under vck190_platform project, and then select <strong>Modify BSP</strong> settings under Board support package, and modify stdin and stdout to <strong>axi_uarlite_0</strong> by pressing &lt;Y&gt; option as shown in the figure.</p>
<img alt="../../../../_images/vitis_uartlite_enable.JPG" src="../../../../_images/vitis_uartlite_enable.JPG" />
</li>
<li><p>Click <strong>&lt;OK&gt;</strong> to save the above configuration and exit the configuration wizard.</p></li>
<li><p>Right-click <strong>freertos_gpio_test_system</strong> and select <strong>Build Project</strong>. Alternatively, you can click <img alt="build" src="../../../../_images/image29.png" />.</p>
<p>For building the Linux images and incorporating the FreeRTOS elf into the image, see <a class="reference internal" href="#creating-linux-images-using-petalinux"><span class="std std-ref">Example Project: Creating Linux Images Using PetaLinux</span></a>.</p>
</li>
<li><p>On PL AXI UART Serial Console, RPU debug logs will be printed as below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Gpio</span> <span class="n">Initialization</span> <span class="n">started</span>
<span class="n">Counter</span> <span class="mi">0</span>
<span class="n">Counter</span> <span class="mi">1</span>
<span class="n">Counter</span> <span class="mi">2</span>
<span class="n">Counter</span> <span class="mi">3</span>
<span class="n">Counter</span> <span class="mi">4</span>
<span class="n">Counter</span> <span class="mi">5</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="example-project-creating-linux-images-using-petalinux">
<span id="creating-linux-images-using-petalinux"></span><h2>Example Project: Creating Linux Images Using PetaLinux<a class="headerlink" href="#example-project-creating-linux-images-using-petalinux" title="Permalink to this headline">¶</a></h2>
<p>This section explains how to configure and build the Linux operating system for an Arm Cortex-A72 core-based APU on a Versal device. You can use the PetaLinux tool with the board-specific BSP to configure and build Linux images.</p>
<p>This example needs a Linux host machine. Refer to the PetaLinux Tools Documentation Reference Guide <a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=latest;d=ug1144-petalinux-tools-reference-guide.pdf">UG1144</a> for information on dependencies and installation procedure for the PetaLinux tool.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This example uses the VCK190 PetaLinux BSP to create a PetaLinux project. Ensure that you have downloaded the respective BSP for PetaLinux (VCK190/VMK180).</p>
<ul class="simple">
<li><p>If you are using the VCK190 ES1 board, download the <cite>xilinx-vck190-es1-v2021.2-final.bsp</cite> file from <a class="reference external" href="https://www.xilinx.com/member/vck190_headstart.html">here</a>.</p></li>
<li><p>If you are using the VCK190 production board, download the <cite>xilinx-vck190-v2021.2-final.bsp</cite> file from <a class="reference external" href="https://www.xilinx.com/member/vck190_headstart.html">here</a>.</p></li>
<li><p>If you are using the VMK180 ES1 board, download the VMK180 PetaLinux 2021.12 BSP (<cite>xilinx-vmk180-es1-v2021.2-final.bsp</cite>) from <a class="reference external" href="https://www.xilinx.com/member/vmk180_headstart.html">here</a>.</p></li>
<li><p>If you are using the VMK180 Production board, download the VMK180 PetaLinux 2021.2 BSP (<cite>xilinx-vmk180-v2021.2-final.bsp</cite>) from <a class="reference external" href="https://www.xilinx.com/member/vmk180_headstart.html">here</a>.</p></li>
</ul>
</div>
<ol class="arabic">
<li><p>Copy the respective board’s PetaLinux BSP to the current directory.</p></li>
<li><p>Set up the PetaLinux environment</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source &lt;petalinux-tools-path&gt;/settings.csh
</pre></div>
</div>
</li>
<li><p>Create a PetaLinux project using the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ petalinux-create -t project -s xilinx-vck190-vxxyy.z-final.bsp -n led_example
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For VMK180 board, use <cite>xilinx-vmk180-vxxyy.z-final.bsp</cite> after the <cite>-s</cite> option in the command.</p>
</div>
</li>
<li><p>Change to the PetaLinux project directory using the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$cd led_example
</pre></div>
</div>
</li>
<li><p>Copy the hardware platform project XSA to the Linux host machine.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the VMK180 board, use the XSA file that you generated in the <a class="reference external" href="#design-example-using-axi-gpio">Design Example: Using AXI GPIO</a>.</p>
</div>
</li>
<li><p>Reconfigure the BSP using the following commands.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ petalinux-config --get-hw-description=&lt;path till the directory containing the respective xsa file&gt;
</pre></div>
</div>
<p>This command opens the PetaLinux Configuration window. For this example, no need to change anything in this window.</p>
</li>
<li><p>Click <strong>&lt;Save&gt;</strong> to save the above configuration and then <strong>&lt;Exit&gt;</strong> to exit the configuration wizard.</p></li>
<li><p>Create a Linux application named gpiotest within the PetaLinux project using the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$petalinux-create -t apps --template install --name gpiotest --enable
</pre></div>
</div>
</li>
<li><p>Copy application files from <code class="docutils literal notranslate"><span class="pre">&lt;design-package&gt;/&lt;vck190</span> <span class="pre">or</span> <span class="pre">vmk180&gt;/linux/bootimages</span></code> to the project using the following commands.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$cp &lt;design-package&gt;/ch5_system_design_example_source__files/apu/gpiotest_app/gpiotest/files/* &lt;plnxproj-root&gt;/project-spec/meta-user/recipes-apps/gpiotest/files/
$cp &lt;design-package&gt;/ch5_system_design_example_source__files/apu/gpiotest_app/gpiotest.bb &lt;plnx-proj-root&gt;/project-spec/meta-user/recipes-apps/gpiotest/gpiotest.bb
$cp &lt;design-package&gt;/ch5_system_design_example_source__files/apu/device_tree/system-user.dtsi &lt;plnx-proj-root&gt;/project-spec/meta-user/recipes-bsp/device-tree/files/system-user.dtsi
</pre></div>
</div>
</li>
<li><p>Enable GPIO support within kernel configuration.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$petalinux-config -c kernel
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command opens the kernel configuration wizard for the PetaLinux project.</p>
</div>
</li>
<li><p>Navigate to <strong>Device drivers→ GPIO Support</strong> and enable it by pressing the <strong>&lt;Y&gt;</strong> key. Press <strong>Enter</strong> and enable the Debug GPIO calls and <code class="docutils literal notranslate"><span class="pre">/sys/class/gpio/...(sysfs</span> <span class="pre">interface)</span></code> entries by pressing the <strong>&lt;Y&gt;</strong> key as shown in the following figure.</p>
<img alt="../../../../_images/versal_2021_gpio_debug.png" src="../../../../_images/versal_2021_gpio_debug.png" />
</li>
<li><p>Navigate to <strong>Memory mapped GPIO drivers</strong> and enable Xilinx GPIO support and Xilinx Zynq GPIO support by pressing <strong>&lt;Y&gt;</strong> key as shown in the following figure.</p>
<img alt="../../../../_images/versal_2021_gpio_xilinx.png" src="../../../../_images/versal_2021_gpio_xilinx.png" />
</li>
<li><p>Click <strong>&lt;Save&gt;</strong> to save the above configuration and then <strong>&lt;Exit&gt;</strong> option to exit the configuration wizard.</p></li>
<li><p>Configure ROOTFS to disable the AIE, STDC++, and TCL options to reduce the rootfs size to fit into both SD and OSPI/QSPI Flash partitions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">petalinux</span><span class="o">-</span><span class="n">config</span> <span class="o">-</span><span class="n">c</span> <span class="n">rootfs</span>
</pre></div>
</div>
</li>
<li><p>Navigate to User Packages and disable aie-notebooks, openamp-demo-notebooks, packagegroup-petalinux-jupyter, pm-notebooks, python3-ipywidgets support by pressing &lt;Y&gt; key as shown in the following figure.</p>
<img alt="../../../../_images/rootfs_config_aie.JPG" src="../../../../_images/rootfs_config_aie.JPG" />
</li>
<li><p>Navigate to <strong>Filesystem Packages → misc → gcc-runtime</strong> and disable <strong>libstdc++ support</strong> by pressing &lt;Y&gt; key as shown in the following figure.</p>
<img alt="../../../../_images/rootfs_config_stdc++.JPG" src="../../../../_images/rootfs_config_stdc++.JPG" />
</li>
<li><p>Navigate to <strong>Filesystem Packages → devel → tcltk → tcl</strong> and disable <strong>tcl support</strong> by pressing &lt;Y&gt; key as shown in the following figure.</p>
<img alt="../../../../_images/rootfs_config_tcl.JPG" src="../../../../_images/rootfs_config_tcl.JPG" />
</li>
<li><p>Click <strong>&lt;Save&gt;</strong> to save the above configuration and then click <strong>&lt;Exit&gt;</strong> to exit the configuration wizard.</p></li>
<li><p>OSPI and eMMC boot modes will work only on VCK190/VMK180 REVB Production boards.</p></li>
<li><p>For OSPI build, copy the below code to PLNX project bsp file <code class="docutils literal notranslate"><span class="pre">&lt;plnxproj-root&gt;/project-spec/meta-user/conf/petalinuxbsp.conf</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VCK190</span> <span class="n">Production</span> <span class="n">board</span><span class="p">:</span>
<span class="n">YAML_DT_BOARD_FLAGS_vck190</span> <span class="o">=</span> <span class="s2">&quot;{BOARD versal-vck190-reva-x-ebm-03-reva}&quot;</span>

<span class="n">VMK180</span> <span class="n">Production</span> <span class="n">board</span><span class="p">:</span>
<span class="n">YAML_DT_BOARD_FLAGS_vmk180</span> <span class="o">=</span> <span class="s2">&quot;{BOARD versal-vmk180-reva-x-ebm-03-reva}&quot;</span>
</pre></div>
</div>
</li>
<li><p>For eMMC build, copy the below code to PLNX project bsp file <code class="docutils literal notranslate"><span class="pre">&lt;plnxproj-root&gt;/project-spec/meta-user/conf/petalinuxbsp.conf</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VCK190</span> <span class="n">Production</span> <span class="n">board</span><span class="p">:</span>
<span class="n">YAML_DT_BOARD_FLAGS_vck190</span> <span class="o">=</span> <span class="s2">&quot;{BOARD versal-vck190-reva-x-ebm-02-reva}&quot;</span>

<span class="n">VMK180</span> <span class="n">Production</span> <span class="n">board</span><span class="p">:</span>
<span class="n">YAML_DT_BOARD_FLAGS_vmk180</span> <span class="o">=</span> <span class="s2">&quot;{BOARD versal-vmk180-reva-x-ebm-02-reva}&quot;</span>
</pre></div>
</div>
</li>
<li><p>Build the Linux images using the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ petalinux-build
</pre></div>
</div>
</li>
</ol>
<div class="section" id="combining-freertos-and-apu-images-using-a-bif-file">
<h3>Combining FreeRTOS and APU Images using a BIF File<a class="headerlink" href="#combining-freertos-and-apu-images-using-a-bif-file" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Open the XSCT console in your Vitis IDE workspace.</p></li>
<li><p>Navigate to the <code class="docutils literal notranslate"><span class="pre">images/linux</span></code> directory of your PetaLinux project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd &lt;petalinux-project&gt;/images/linux/
</pre></div>
</div>
</li>
<li><p>Freertos elf file is supported only for QSPI/SD boot images. Copy the <cite>freertos_gpio_test.elf</cite> from <code class="docutils literal notranslate"><span class="pre">&lt;design-package&gt;/vck190/freertos/bootimages/freertos_gpio_test.elf</span></code> to the <cite>images/linux</cite> directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cp &lt;design-package&gt;/vck190/ready_to_test/qspi_images/freertos/freertos_gpio_test.elf .
</pre></div>
</div>
</li>
<li><p>Copy the <cite>bootgen.bif</cite> file from <code class="docutils literal notranslate"><span class="pre">&lt;design-package&gt;/</span></code> to the <code class="docutils literal notranslate"><span class="pre">images/linux</span></code> directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cp &lt;design-package&gt;/vck190/ready_to_test/qspi_images/linux/bootgen.bif .
</pre></div>
</div>
</li>
<li><p>Run the following command to create <cite>BOOT.BIN</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ bootgen -image bootgen.bif -arch versal -o BOOT.BIN -w
</pre></div>
</div>
<p>This creates a <cite>BOOT.BIN</cite> image file in the <code class="docutils literal notranslate"><span class="pre">&lt;petalinux-project&gt;/images/linux/</span></code> directory.</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run the images using SD boot mode, see <a class="reference internal" href="4-boot-and-config.html#boot-sequence-sd-boot-mode"><span class="std std-ref">Boot Sequence for SD-Boot Mode</span></a>.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="6-system-design-example-HSDP.html" class="btn btn-neutral float-right" title="System Design Example for High-Speed Debug Port with SmartLynq+ Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="3-debugging.html" class="btn btn-neutral float-left" title="Debugging Using the Vitis Software Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on February 9, 2022.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2021 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>