<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Building and Debugging Linux Applications for Zynq-7000 SoCs &mdash; Embedded Design Tutorials 2021.2 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Using the GP Port in Zynq Devices" href="5-using-gp-port-zynq.html" />
    <link rel="prev" title="Debugging Standalone Applications with the Vitis Software Platform" href="3-debugging-vitis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> Embedded Design Tutorials
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2021.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">简体中文</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-cn/index.html">Master</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">日本語</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/master/docs-jp/index.html">Master</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Versal-EDT/Versal-EDT.html">Versal ACAP Embedded Design Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ZynqMPSoC-EDT/ZynqMPSoC-EDT.html">Zynq UltraScale+ MPSoC Embedded Design Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Zynq7000-EDT.html">Zynq-7000 Embedded Design Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1-introduction.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-using-zynq.html">Using the Zynq SoC Processing System</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-debugging-vitis.html">Debugging Standalone Applications with the Vitis Software Platform</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Building and Debugging Linux Applications for Zynq-7000 SoCs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-4-creating-linux-images">Example 4: Creating Linux Images</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#input-and-output-files">Input and Output Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-petalinux-image">Creating a PetaLinux Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#booting-linux-on-the-target-board">Booting Linux on the Target Board</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-5-creating-a-hello-world-application-for-linux-in-the-vitis-ide">Example 5: Creating a Hello World Application for Linux in the Vitis IDE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-linux-domain">Creating Linux Domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-linux-applications-in-the-vitis-ide">Creating Linux Applications in the Vitis IDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preparing-the-linux-agent-for-remote-connection">Preparing the Linux Agent for Remote Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-linux-application-from-the-vitis-ide">Running the Linux Application from the Vitis IDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debugging-a-linux-application-from-the-vitis-ide">Debugging a Linux Application from the Vitis IDE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="5-using-gp-port-zynq.html">Using the GP Port in Zynq Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="6-using-hp-port.html">Using the HP Slave Port with AXI CDMA IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="7-linux-booting-debug.html">Linux Boot Image Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-custom-ip-driver-linux.html">Creating Custom IP and Device Drivers for Linux</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Feature Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Feature_Tutorials/debuggable-fsbl/debuggable-fsbl.html">First Stage Boot Loader (FSBL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Feature_Tutorials/sw-profiling/sw-profiling.html">Profiling Applications with System Debugger</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Design Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Design_Tutorials/MPSoC_Graphic_Subsystem/README.html">Example Setup for a Graphics and DisplayPort Based Sub-System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Debugging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Vitis-Embedded-Software-Debugging/Debugging.html">Vitis Embedded Software Debugging Guide (UG1515) 2021.1</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../User_Guides/SPA-UG/SPA-UG.html">System Performance Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../User_Guides/Performance_Benchmark/Dhrystone/README.html">Versal Dhrystone Benchmark</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">See All Releases</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/docs/2022.1/build/html/index.html">2022.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/docs/2021.1/build/html/index.html">2021.1</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/Embedded-Design-Tutorials/docs/2020.2/build/html/index.html">2020.2</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Embedded Design Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="Zynq7000-EDT.html">Zynq-7000 Embedded Design Tutorial</a> &raquo;</li>
      <li>Building and Debugging Linux Applications for Zynq-7000 SoCs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/Introduction/Zynq7000-EDT/4-linux-for-zynq.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="building-and-debugging-linux-applications-for-zynq-7000-socs">
<h1>Building and Debugging Linux Applications for Zynq-7000 SoCs<a class="headerlink" href="#building-and-debugging-linux-applications-for-zynq-7000-socs" title="Permalink to this heading">¶</a></h1>
<p>This chapter demonstrates how to develop and debug Linux applications.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#example-4-creating-linux-images"><span class="std std-ref">Example 4: Creating Linux Images</span></a> introduces how to create a Linux image with PetaLinux.</p></li>
<li><p><a class="reference internal" href="#example-5-creating-a-hello-world-application-for-linux-in-the-vitis-ide"><span class="std std-ref">Example 5: Creating a Hello World Application for Linux in the Vitis IDE</span></a> creates a Linux application in the Vitis IDE with the Linux image created in Example 4.</p></li>
</ul>
<div class="section" id="example-4-creating-linux-images">
<span id="id1"></span><h2>Example 4: Creating Linux Images<a class="headerlink" href="#example-4-creating-linux-images" title="Permalink to this heading">¶</a></h2>
<p>In this example, you will configure and build a Linux operating system platform for an Arm™ Cortex-A9 core based APU on a Zynq® 7000 device. You can configure and build Linux images using the PetaLinux tool flow, along with the board-specific BSP. The Linux application is developed in the Vitis IDE.</p>
<div class="section" id="input-and-output-files">
<h3>Input and Output Files<a class="headerlink" href="#input-and-output-files" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Input:</p>
<ul>
<li><p>Hardware XSA (<code class="docutils literal notranslate"><span class="pre">system_wrapper.xsa</span></code> generated in <a class="reference internal" href="2-using-zynq.html#example-1-creating-a-new-embedded-project-with-zynq-soc"><span class="std std-ref">Example 1: Creating a New Embedded Project with Zynq SoC</span></a>)</p></li>
<li><p><a class="reference external" href="https://www.xilinx.com/member/forms/download/xef.html?filename=xilinx-zc702-v2021.2-final.bsp">PetaLinux ZC702 BSP</a></p></li>
</ul>
</li>
<li><p>Output:</p>
<ul>
<li><p>PetaLinux boot images (<code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code>, <code class="docutils literal notranslate"><span class="pre">image.ub</span></code>)</p></li>
<li><p>PetaLinux application (hello_linux)</p></li>
</ul>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ol class="arabic simple">
<li><p>This example requires a Linux host machine with PetaLinux installed. Refer to the <em>PetaLinux Tools Documentation: Reference Guide</em> (<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=latest;d=ug1144-petalinux-tools-reference-guide.pdf">UG1144</a>) for information about dependencies for PetaLinux 2021.2.</p></li>
<li><p>This example uses the <a class="reference external" href="https://www.xilinx.com/member/forms/download/xef.html?filename=xilinx-zc702-v2021.2-final.bsp">PetaLinux ZC702 BSP</a> to create a PetaLinux project. Ensure that you have downloaded the ZC702 BSP for PetaLinux as instructed on the <a class="reference external" href="https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/embedded-design-tools.html">PetaLinux Tools download page</a>.</p></li>
</ol>
</div>
</div>
<div class="section" id="creating-a-petalinux-image">
<h3>Creating a PetaLinux Image<a class="headerlink" href="#creating-a-petalinux-image" title="Permalink to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Create a PetaLinux project using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-create -t project -s &lt;path to the xilinx-zc702-v2021.2-final.bsp&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>xilinx-zc702-v2021.2-final.bsp</strong> is the PetaLinux BSP for the ZC702 Production Silicon Rev 1.0 Board.</p>
</div>
<p>This creates a PetaLinux project directory, <strong>xilinx-zc702-2021.2</strong>.</p>
</li>
<li><p>Reconfigure the project with <strong>system_wrapper.xsa</strong>:</p>
<ul>
<li><p>The created PetaLinux project uses the default hardware setup in the ZC702 Linux BSP. In this example, you will reconfigure the PetaLinux project based on the Zynq design that you configured using the Vivado® Design Suite in <a class="reference internal" href="2-using-zynq.html#example-1-creating-a-new-embedded-project-with-zynq-soc"><span class="std std-ref">Example 1: Creating a New Embedded Project with Zynq SoC</span></a>.</p></li>
<li><p>Copy the hardware platform <code class="docutils literal notranslate"><span class="pre">system_wrapper.xsa</span></code> to the Linux host machine.</p></li>
<li><p>Reconfigure the project using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> xilinx-zc702-2021.2
petalinux-config --get-hw-description<span class="o">=</span>&lt;path that contains system_wrapper.xsa&gt;
</pre></div>
</div>
</li>
</ul>
<p>This command opens the PetaLinux Configuration window. You can review these settings. If required, make changes in the configuration. For this example, the default settings from the BSP are sufficient to generate the required boot images. Select <strong>Exit</strong> and press <strong>Enter</strong> to exit the configuration window.</p>
<p>If you would prefer to skip the configuration window and keep the default settings, run the following command instead:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-config --get-hw-description<span class="o">=</span>&lt;path containing system_wrapper.xsa&gt; --silentconfig
</pre></div>
</div>
</li>
<li><p>Build the PetaLinux project:</p>
<ul>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">&lt;PetaLinux-project&gt;</span></code> directory (for example, <code class="docutils literal notranslate"><span class="pre">xilinx-zc702-2021.2</span></code>), build the Linux images using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-build
</pre></div>
</div>
</li>
<li><p>After the above statement executes successfully, verify the images and the timestamp in the images directory in the PetaLinux project folder using the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> images/linux
ls -al
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">boot.scr</span></code> is the script that U-Boot reads during boot time to load the kernel and rootfs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">image.ub</span></code> contains kernel image, device tree and rootfs.</p></li>
</ul>
</li>
<li><p>Generate the boot image using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-package --boot --fsbl zynq_fsbl.elf --u-boot
</pre></div>
</div>
<p>This creates a <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code> image file in the <code class="docutils literal notranslate"><span class="pre">&lt;petalinux-project&gt;/images/linux/</span></code> directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The option to add bitstream, <code class="docutils literal notranslate"><span class="pre">--fpga</span></code>, is missing from the above command intentionally because so far the hardware configuration is based only on a PS with no design in the PL. If a bitstream is present in the design, <code class="docutils literal notranslate"><span class="pre">--fpga</span></code> can be added in the <code class="docutils literal notranslate"><span class="pre">petalinux-package</span></code> command as shown below:</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-package --boot --fsbl zynq_fsbl.elf --fpga system.bit --u-boot u-boot.elf
</pre></div>
</div>
<p>Refer to <code class="docutils literal notranslate"><span class="pre">petalinux-package</span> <span class="pre">--boot</span> <span class="pre">--help</span></code> for more details about the boot image package command.</p>
</li>
</ol>
</div>
<div class="section" id="booting-linux-on-the-target-board">
<h3>Booting Linux on the Target Board<a class="headerlink" href="#booting-linux-on-the-target-board" title="Permalink to this heading">¶</a></h3>
<p>You will now boot Linux on the Zynq-7000 SoC ZC702 target board using the JTAG mode.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Additional boot options are explained in <a class="reference internal" href="7-linux-booting-debug.html"><span class="doc">Linux Booting and Debug in the Software Platform</span></a>.</p>
</div>
<ol class="arabic">
<li><p>Copy the <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code>, <code class="docutils literal notranslate"><span class="pre">image.ub</span></code>, and <code class="docutils literal notranslate"><span class="pre">boot.scr</span></code> files to the SD card.</p></li>
<li><p>Set up the board as described in <a class="reference internal" href="2-using-zynq.html#setting-up-the-board"><span class="std std-ref">Setting Up the Board</span></a>.</p></li>
<li><p>Change the boot mode to SD boot.</p>
<ul class="simple">
<li><p>Change <strong>SW16[5:1]</strong> to <strong>01100</strong></p></li>
</ul>
<div class="figure align-default" id="id5">
<img alt="SD Boot Mode Setup for SW16" src="../../../_images/image89.jpeg" />
<p class="caption"><span class="caption-text">SD Boot Mode Setup for SW16</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Make sure Ethernet Jumper J30 and J43 are as shown in the following figure.</p>
<div class="figure align-default" id="id6">
<img alt="Ethernet Jumper" src="../../../_images/image69.jpeg" />
<p class="caption"><span class="caption-text">Ethernet Jumper</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>Ethernet is optional in this example. It is required in Example 5.</p>
</li>
<li><p>Launch the Vitis software platform and open the same workspace you used in <a class="reference internal" href="2-using-zynq.html"><span class="doc">Using the Zynq SoC Processing System</span></a>.</p></li>
<li><p>If the serial terminal is not open, connect the serial communication utility with the baud rate set to <strong>115200</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the baud rate that the UART is programmed to on Zynq devices.</p>
</div>
</li>
<li><p>Power on the target board.</p></li>
<li><p>The Linux login prompt will appear. Use user name <code class="docutils literal notranslate"><span class="pre">root</span></code> and password <code class="docutils literal notranslate"><span class="pre">root</span></code> to log in.</p></li>
</ol>
</div>
</div>
<div class="section" id="example-5-creating-a-hello-world-application-for-linux-in-the-vitis-ide">
<span id="id2"></span><h2>Example 5: Creating a Hello World Application for Linux in the Vitis IDE<a class="headerlink" href="#example-5-creating-a-hello-world-application-for-linux-in-the-vitis-ide" title="Permalink to this heading">¶</a></h2>
<p>In this example, you will use the Vitis IDE to create a Linux application that runs on the embedded Linux environment.</p>
<div class="section" id="creating-linux-domain">
<h3>Creating Linux Domain<a class="headerlink" href="#creating-linux-domain" title="Permalink to this heading">¶</a></h3>
<p>First, create a Linux domain in the Vitis IDE. The Linux domain contains the information required by the Linux application.</p>
<p>The steps to create a Linux domain are given below:</p>
<ol class="arabic">
<li><p>Go to the Explorer view in the Vitis software platform and expand the <strong>zc702_edt</strong> platform project.</p></li>
<li><p>Open the platform by double clicking <strong>platform.spr</strong>.</p></li>
<li><p>The platform view opens. Click the <strong>+</strong> button in the right corner to add a domain, as shown in the following figure.</p>
<div class="figure align-default" id="id7">
<img alt="platform.spr" src="../../../_images/image731.png" />
<p class="caption"><span class="caption-text">platform.spr</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>When the New Domain dialog box opens, enter the details as given below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 66%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Name</p></td>
<td><p>linux_domain</p></td>
</tr>
<tr class="row-odd"><td><p>Display Name</p></td>
<td><p>linux_domain</p></td>
</tr>
<tr class="row-even"><td><p>OS</p></td>
<td><p>Linux</p></td>
</tr>
<tr class="row-odd"><td><p>Processor</p></td>
<td><p>ps7_cortexa9</p></td>
</tr>
<tr class="row-even"><td><p>Supported Runtimes</p></td>
<td><p>C/C++</p></td>
</tr>
<tr class="row-odd"><td><p>Architecture</p></td>
<td><p>32-bit</p></td>
</tr>
<tr class="row-even"><td><p>Bif file</p></td>
<td><p>Keep blank</p></td>
</tr>
<tr class="row-odd"><td><p>Boot Components Directory</p></td>
<td><p>Keep blank</p></td>
</tr>
<tr class="row-even"><td><p>Linux image directory</p></td>
<td><p>Keep blank</p></td>
</tr>
</tbody>
</table>
<div class="figure align-default" id="id8">
<img alt="Creating Linux domain" src="../../../_images/image741.png" />
<p class="caption"><span class="caption-text">Creating Linux domain</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<ul>
<li><p>Click <strong>OK</strong> to finish, and observe that the Linux domain has been added to the zc702_edt as shown below.</p>
<div class="figure align-default" id="id9">
<img alt="Updated platform domains" src="../../../_images/image75.png" />
<p class="caption"><span class="caption-text">Updated platform domains</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you fill in the Bif File, Boot Components Directory, and Linux Image Directory options, Vitis can help to generate <code class="docutils literal notranslate"><span class="pre">sd_card.img</span></code> when you build the system project in the Linux host OS. In this case, it is helpful to use the <code class="docutils literal notranslate"><span class="pre">ext4</span></code> root file system. In the examples in this tutorial, which use <code class="docutils literal notranslate"><span class="pre">initramfs</span></code>, it is only required to copy files to the FAT32 partition into the SD card, so this feature will not be used.</p>
</div>
</li>
<li><p>Build the platform:</p>
<ul class="simple">
<li><p>Click the hammer button on the tool bar to build the platform.</p></li>
</ul>
<p>Now you have a Linux domain and are ready to create Linux applications.</p>
</li>
</ol>
</div>
<div class="section" id="creating-linux-applications-in-the-vitis-ide">
<h3>Creating Linux Applications in the Vitis IDE<a class="headerlink" href="#creating-linux-applications-in-the-vitis-ide" title="Permalink to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Create a Linux application:</p>
<ol class="arabic simple">
<li><p>Click <strong>File → New → Application Project</strong>.</p></li>
<li><p>Click <strong>Next</strong> on the welcome page.</p></li>
<li><p>Select platform: <strong>zc702_edt</strong>. Click <strong>Next</strong>.</p></li>
<li><p>Enter the application project name, <strong>hello_linux</strong>, and the target processor, <strong>psu_cortexa9 SMP</strong>.</p></li>
<li><p>Keep the default domain: <strong>linux_domain</strong>.</p></li>
<li><p>Keep the SYSROOT, rootfs, and kernel image empty, and click <strong>Next</strong>.</p></li>
<li><p>Select the <strong>Linux Hello World</strong> template. Click <strong>Finish</strong>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you input an extracted SYSROOT directory, Vitis can find include files and libraries in SYSROOT. SYSROOT is generated by the PetaLinux project <code class="docutils literal notranslate"><span class="pre">petalinux-build</span> <span class="pre">--sdk</span></code>. Refer to the <em>PetaLinux Tools Documentation: Reference Guide</em> (<a class="reference external" href="https://www.xilinx.com/cgi-bin/docs/rdoc?v=latest;d=ug1144-petalinux-tools-reference-guide.pdf">UG1144</a>) for more information about SYSROOT generation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you input a rootfs and kernel image, Vitis can help to generate the <code class="docutils literal notranslate"><span class="pre">SD_card.img</span></code> when building the Linux system project.</p>
</div>
</li>
<li><p>Build the hello_linux application.</p>
<ul class="simple">
<li><p>Select <strong>hello_linux</strong>.</p></li>
<li><p>Click the hammer button to build the application.</p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="preparing-the-linux-agent-for-remote-connection">
<span id="id4"></span><h3>Preparing the Linux Agent for Remote Connection<a class="headerlink" href="#preparing-the-linux-agent-for-remote-connection" title="Permalink to this heading">¶</a></h3>
<p>The Vitis IDE needs a channel to download the application to the running target for debugging. When the target runs Linux, it uses TCF Agent running on the target. TCF Agent is added to the Linux rootfs from the PetaLinux configuration by default. When Linux boots up, it launches TCF Agent automatically. The Vitis IDE talks to TCF Agent on the board using an Ethernet connection.</p>
<ol class="arabic">
<li><p>Prepare for running the Linux application on the ZC702 board. Vitis can download the Linux application to the board, which runs Linux through a network connection. It is important to ensure that the connection between the host machine and the board works well.</p>
<ul class="simple">
<li><p>Make sure the USB UART cable is still connected with the ZC702 board. Turn on your serial console and connect to the UART port.</p></li>
<li><p>Connect an Ethernet cable between the host and the ZC702 board.</p>
<ul>
<li><p>It can be a direct connection from the host to the ZC702 board.</p></li>
<li><p>You can also connect the host and the ZC702 board using a router.</p></li>
</ul>
</li>
<li><p>Power on the board and let Linux run on ZC702.</p></li>
<li><p>Set up a networking software environment.</p>
<ul>
<li><p>If the host and the board are connected directly, run <code class="docutils literal notranslate"><span class="pre">ifconfig</span> <span class="pre">eth0</span> <span class="pre">192.168.1.1</span></code> to set up an IP address on the board. Go to <strong>Control Panel → Network and Internet → Network and Sharing Center</strong>, and click <strong>Change Adapter Settings</strong>. Find your Ethernet adapter, then right-click and select <strong>Properties</strong>. Double-click <strong>Internet Protocol Version 4 (TCP/IPv4)</strong>, and select <strong>Use the following IP address</strong>. Input the IP address <strong>192.168.1.2</strong>. Click <strong>OK</strong>.</p></li>
<li><p>If the host and the board are connected through a router, they should be able to get an IP address from the router. If the Ethernet cable is plugged in after the board boots up, you can get the IP address manually by running the <code class="docutils literal notranslate"><span class="pre">udhcpc</span> <span class="pre">eth0</span></code> command, which returns the board IP address.</p></li>
<li><p>Have the host and the zc702 board ping each other to make sure the network is set up correctly.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Set up the Linux agent in the Vitis IDE.</p>
<ol class="arabic">
<li><p>Click the <strong>Target Connections</strong> icon on the toolbar.</p></li>
<li><p>It can also be launched by going to <strong>Window → Show View…</strong> and then looking for the target.</p>
<div class="figure align-default" id="id10">
<img alt="Vitis Show View search for Target Connections" src="../../../_images/vitis_launch_target_connections.png" />
<p class="caption"><span class="caption-text">Vitis Show View search for Target Connections</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>In the Target Connections window, double-click <strong>Linux TCF Agent → Linux Agent[default]</strong>.</p></li>
<li><p>Input the IP address of your board.</p></li>
<li><p>Click <strong>Test Connection</strong>.</p>
<div class="figure align-default" id="id11">
<img alt="Vitis test connection details" src="../../../_images/vitis_target_connection_details.png" />
<p class="caption"><span class="caption-text">Vitis test connection details</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<p>Vitis should return a pop-up confirmation for success.</p>
<div class="figure align-default" id="id12">
<img alt="Vitis test connection success" src="../../../_images/vitis_test_connection_success.png" />
<p class="caption"><span class="caption-text">Vitis test connection success</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div class="section" id="running-the-linux-application-from-the-vitis-ide">
<h3>Running the Linux Application from the Vitis IDE<a class="headerlink" href="#running-the-linux-application-from-the-vitis-ide" title="Permalink to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Run the Linux application:</p>
<ul class="simple">
<li><p>Right-click <strong>hello_linux</strong>, and select <strong>Run As → Run Configurations</strong>.</p></li>
<li><p>Expand <strong>Single Application Debug</strong> and select <strong>Debugger_hello_linux-Default</strong>. If it doesn’t exist, click the <strong>New Launch Configuration</strong> button or double click <strong>Single Application Debug</strong> to create a new launch configuration for hello_linux.</p></li>
<li><p>Review the configurations:</p>
<ul>
<li><p>Debug type: <strong>Linux Application Debug</strong></p></li>
<li><p>Connection: <strong>Linux Agent</strong></p></li>
</ul>
</li>
<li><p>Click <strong>Run</strong>.</p></li>
</ul>
<div class="figure align-default" id="id13">
<img alt="Vitis Linux Run Configurations" src="../../../_images/vitis_linux_run_configurations.png" />
<p class="caption"><span class="caption-text">Vitis Linux Run Configurations</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id14">
<img alt="Application Tab" src="../../../_images/vitis_linux_run_configurations_applications.png" />
<p class="caption"><span class="caption-text">Application Tab</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<ul class="simple">
<li><p>The console should print <strong>Hello World</strong>.</p></li>
</ul>
<div class="figure align-default" id="id15">
<img alt="Linux Hello World run result" src="../../../_images/linux_hello_world.png" />
<p class="caption"><span class="caption-text">Linux Hello World run result</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Disconnect the connection:</p>
<ul class="simple">
<li><p>Click the <strong>Terminate</strong> button on the toolbar or press <strong>Ctrl+F2</strong>.</p></li>
<li><p>Click the <strong>Disconnect</strong> button on the toolbar.</p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="debugging-a-linux-application-from-the-vitis-ide">
<h3>Debugging a Linux Application from the Vitis IDE<a class="headerlink" href="#debugging-a-linux-application-from-the-vitis-ide" title="Permalink to this heading">¶</a></h3>
<p>Debugging Linux applications requires the Linux agent to be set up properly. Refer to <a class="reference internal" href="../ZynqMPSoC-EDT/6-build-linux-sw-for-ps.html#preparing-the-linux-agent-for-remote-connection"><span class="std std-ref">Preparing the Linux Agent for Remote Connection</span></a> for detailed steps.</p>
<ol class="arabic">
<li><p>Debug the Linux application:</p>
<ol class="arabic simple">
<li><p>Right-click <strong>hello_linux</strong>, then select <strong>Debug As → Debug Configurations</strong>.</p></li>
<li><p>Expand <strong>Single Application Debug</strong> and select <strong>Debugger_hello_linux-Default</strong>.</p></li>
<li><p>Review the configurations:</p>
<ul class="simple">
<li><p>Debug type: <strong>Linux Application Debug</strong></p></li>
<li><p>Connection: <strong>Linux Agent</strong></p></li>
</ul>
</li>
<li><p>Click <strong>Debug</strong>.</p></li>
</ol>
<p>The debug configuration has identical options to the run configuration. The difference between debugging and running is that debugging stops at the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function.</p>
</li>
<li><p>Try the debugging features:</p>
<p>Hello World is a simple application. It does not contain much to debug, but you can try the following to explore the Vitis debugger:</p>
<ul class="simple">
<li><p>Review the tabs on the upper right corner: Variables, Breakpoints, Expressions, and the rest.</p></li>
<li><p>Review the call stack on the left.</p></li>
<li><p>The next line to execute has a green background.</p></li>
<li><p>Step over by clicking the icon on the toolbar or pressing <strong>F6</strong> on the keyboard. The printed string will be shown on the Console panel.</p></li>
</ul>
<div class="figure align-default" id="id16">
<img alt="Debug window" src="../../../_images/vitis_debugger_hello_linux_zynq.png" />
<p class="caption"><span class="caption-text">Debug window</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
</li>
<li><p>Disconnect the connection:</p>
<ul class="simple">
<li><p>Click the <strong>Terminate</strong> button on the toolbar or press <strong>Ctrl+F2</strong>.</p></li>
<li><p>Click the <strong>Disconnect</strong> button on the toolbar.</p></li>
</ul>
</li>
</ol>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>In this chapter, you learned how to:</p>
<ul class="simple">
<li><p>Create a Linux boot image with PetaLinux.</p></li>
<li><p>Create simple Linux applications with the Vitis IDE.</p></li>
<li><p>Run and debug using the Vitis IDE.</p></li>
</ul>
<p>Up until now, all your development and debugging activities have been running on the processing system. In the <a class="reference internal" href="5-using-gp-port-zynq.html"><span class="doc">next chapter</span></a>, you will start to add components to the PL (programmable logic). First, you will see how to use the GP port in Zynq devices.</p>
</div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="3-debugging-vitis.html" class="btn btn-neutral float-left" title="Debugging Standalone Applications with the Vitis Software Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="5-using-gp-port-zynq.html" class="btn btn-neutral float-right" title="Using the GP Port in Zynq Devices" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on August 1, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="https://pages.gitenterprise.xilinx.com/techdocs/Test/vvas/build/html/index.html#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>